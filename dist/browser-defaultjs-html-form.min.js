(()=>{var t={16:()=>{Map.prototype.toObject||(Map.prototype.toObject=function(){const t={};for(const[e,i]of this.entries())t[e]=i instanceof Map?i.toObject():i;return t})},353:()=>{String.prototype.hashcode||(String.prototype.hashcode=function(){if(0===this.length)return 0;let t=0;const e=this.length;for(let i=0;i<e;i++)t=(t<<5)-t+this.charCodeAt(i),t|=0;return t})},429:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>n});const n=void 0!==i.g?i.g:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}},562:(t,e,i)=>{"use strict";i.r(e),i.d(e,{BaseField:()=>De,BaseSubmitAction:()=>bi,Container:()=>Ze,Field:()=>Je,Form:()=>Si,List:()=>ci,Page:()=>di,SubmitActionResult:()=>vi});const n="d-",s=100,a=`${n}form`,r=`${n}submit-action`,o=`${n}page`,l=`${n}field`,c=`${n}container`,u=`${n}list`,h=`${n}rows`,d=`${n}row`,p=`${n}add-row`,f=`${n}delete-row`,g=`${n}progress-bar`,y=`${n}step`,m=`${n}validation`,v=`${n}message`,b=`${n}control`,w=`${n}control-back`,x=`${n}control-next`,A=`${n}control-summary`,E=`${n}control-submit`,N="init",P="validating",V="input",T="summary",M="finished",O="d-form-",L=`${O}initialized`,C=`${O}initializesubmit-action`,S=`${O}submit`,$=`${O}submit-results`,D=`${O}condition-state-changed`,z=`${O}field-value-updated`,H=`${O}site-changed`,j=`${O}state-changed`,_=`${O}field-input`,I=`${O}list-row-add`,k=`${O}list-row-delete`,R=`${O}progress-bar-changed`,F=`${O}field-initialized`,U=`${O}field-removed`,B=`${O}page-initialized`,q=`${O}page-removed`,G=`${O}validation-removed`,X=`${O}message-removed`,J=`${O}active-state-changed`,Q=`${O}valid-state-changed`,W=`${O}editable-state-changed`,Z=`${O}readonly-state-changed`,K="$item",Y="name",tt="custom-submitted-event",et="endpoint",it="method",nt="state",st="step",at="use-summary-page",rt="input-mode-after-submit",ot="required",lt="condition",ct="active",ut="disabled",ht="editable",dt="editable-condition",pt="readonly",ft="no-value",gt="valid",yt="invalid",mt="evaluate",vt="condition-valid",bt="condition-invalid",wt="min",xt="max",At="progress";class Et{constructor(t,e){this.key=t,this.context=e}get keyDefined(){return this.key in this.context}get hasValue(){return!!this.context[this.key]}get value(){return this.context[this.key]}set value(t){this.context[this.key]=t}set append(t){if(this.hasValue){const e=this.value;e instanceof Array?e.push(t):this.value=[this.value,t]}else this.value=t}remove(){delete this.context[this.key]}static load(t,e,i=!0){let n=t;const s=e.split(".");let a=s.shift().trim();for(;s.length>0;){if(!n[a]){if(!i)return null;n[a]={}}n=n[a],a=s.shift().trim()}return new Et(a,n)}}const Nt=t=>null==t||void 0===t,Pt=t=>{if(null==t)return!0;switch(typeof t){case"number":case"bigint":case"boolean":case"string":case"undefined":return!0}return!1},Vt=t=>!(Nt(t)||"object"!=typeof t||t.constructor&&"Object"!==t.constructor.name),Tt=(t,e)=>{const i=Nt(t),n=Nt(e);if(i||n)return t===e;if(Pt(t)||Pt(e))return t===e;const s=typeof t;return s==typeof e&&("function"===s?t===e:((t,e)=>{const i=Object.keys(t),n=Object.keys(e);if(i.length!==n.length)return!1;for(const n of i){const i=t[n],s=e[n];if(!Tt(i,s))return!1}return!0})(t,e)&&((t,e)=>{const i=Object.getPrototypeOf(t),n=Object.getPrototypeOf(e);if(i!=n)return!1;if(!i)return!0;const s=Object.getOwnPropertyNames(i),a=Object.getOwnPropertyNames(n);if(s.length!==a.length)return!1;for(const i of s){const n=t[i],s=e[i];if(!Tt(n,s))return!1}return!0})(t,e))},Mt=t=>{if(!Vt(t))return!1;for(const e in t)if("function"==typeof t[e])return!1;return!0},Ot=function(t,...e){t||(t={});for(let i of e)Mt(i)&&Object.getOwnPropertyNames(i).forEach((e=>{Mt(t[e])?Ot(t[e],i[e]):t[e]=i[e]}));return t},Lt=function(){const[t,e,{deep:i=!1,recursive:n=!0,parents:s=[]}={}]=arguments,a={};for(let r in t){const o=t[r],l=e(r,o,t);!l||i&&null!=o?l&&i&&("object"!=typeof o||o instanceof Array||o instanceof Map||o instanceof Set||o instanceof RegExp||s.includes[o]||o==t?a[r]=o:a[r]=Lt(o,e,{deep:i,recursive:n,parents:s.concat(t)})):a[r]=o}return a},Ct=(t,e,i)=>{Object.defineProperty(t,e,{value:i,writable:!1,configurable:!1,enumerable:!1})},St=(t,e,i)=>{Object.defineProperty(t,e,{get:i,configurable:!1,enumerable:!1})},$t={isNullOrUndefined:Nt,isObject:Vt,equalPojo:Tt,isPojo:Mt,append:function(t,e,i){return void 0!==e&&(Et.load(i,t,!0).append=e),i},merge:Ot,filter:Lt,buildPropertyFilter:function({names:t,allowed:e}){return(i,n,s)=>t.includes(i)===e},defValue:Ct,defGet:St,defGetSet:(t,e,i,n)=>{Object.defineProperty(t,e,{get:i,set:n,configurable:!1,enumerable:!1})}},Dt=()=>{let t=null,e=null;const i=new Promise(((i,n)=>{t=i,e=n}));let n,s=!1,a=!1;return Ct(i,"resolve",(i=>{n=i,s=!0,n instanceof Error?(a=!0,e(n)):t(n)})),St(i,"value",(()=>n)),St(i,"error",(()=>a)),St(i,"resolved",(()=>s)),i},zt=Dt,Ht=()=>{const t=new Uint32Array(4);window.crypto.getRandomValues(t);let e=-1;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(i=>{e++;const n=t[e>>3]>>e%8*4&15;return("x"==i?n:3&n|8).toString(16)}))},jt=(t,e,i=":")=>{let n="unsupported";if("string"==typeof e)n=e;else if(e instanceof HTMLElement)n=e.nodeName;else{if("string"!=typeof e.NODENAME)throw new Error(typeof e+' is not supported as parameter "node"!');n=e.NODENAME}return`${n.toLowerCase()}${i}${t}`},_t=t=>class extends t{static get NODENAME(){return this.nodeName.toLowercase()}static get observedAttributes(){return[]}#t=null;#e=[];constructor({shadowRoot:t=!1,content:e=null,createUID:i=!1,uidPrefix:n="id-",uidSuffix:s="",postConstucts:a=null}={}){if(super(),this.#t=Dt(),i&&this.#e.push((async()=>this.attr("id",((t,e)=>{let i=0,n=null;for(;i<100;){if(n=`${t||""}${Ht()}${e||""}`,!document.getElementById(n))return n;i++}return console.error(new Error("To many retries to create an unique id - created id is not unique!")),n})(n,s)))),t&&this.attachShadow({mode:"open"}),e&&this.root.append("function"==typeof e?e(this):e),a instanceof Array)for(let t of a)"function"==typeof t&&this.#e.push(t)}get postConstructs(){return this.#e}get root(){return this.shadowRoot||this}get ready(){return this.#t}async init(){for(let t of this.#e)await t(this)}async destroy(){this.ready.resolved&&(this.#t=Dt())}connectedCallback(){this.ownerDocument==document&&this.isConnected&&this.init().then((t=>this.#t.resolve(t))).catch((t=>this.#t.resolve(t)))}adoptedCallback(){this.connectedCallback()}attributeChangedCallback(t,e,i){e!=i&&this.isConnected&&(this.trigger(10,((t,e,i=":")=>jt(`attribute--${t}`,e,i))(t,this)),this.trigger(10,jt("change",this)))}disconnectedCallback(){this.destroy()}},It=new Map,kt=(t=>{let e=It.get(t);return null==e&&(e=_t(t),It.set(t,e)),e})(HTMLElement);var Rt=i(429);class Ft{constructor(t){this.hasValue=1==arguments.length,this.value=t}}class Ut{constructor(t,e){this.data=t,this.resolver=e,this.cache=new Map}updateData(t){this.data=t,this.cache=new Map}resetCache(){this.cache=new Map}getPropertyDef(t,e=!0){if(this.cache.has(t))return this.cache.get(t);let i=null;if(this.data&&t in this.data)i={data:this.data,resolver:this.resolver,defined:!0};else{if(!e)return null;i=((t,e)=>{for(;t;){const i=t.proxy.handle.getPropertyDef(e,!1);if(i)return i;t=t.parent}return{data:null,resolver:null,defined:!1}})(this.resolver.parent,t)}return i.defined&&this.cache.set(t,i),i}hasProperty(t){const{defined:e}=this.getPropertyDef(t);return e}getProperty(t){const{data:e}=this.getPropertyDef(t);return e?e[t]:void 0}setProperty(t,e){const{data:i,defined:n}=this.getPropertyDef(t);n?i[t]=e:(this.data||(this.data={}),this.data[t]=e,this.cache.set(t,{data:this.data,resolver:this.resolver,defined:!0}))}deleteProperty(t){throw new Error("unsupported function!")}}class Bt{#i=null;#n=null;constructor(t,e){this.#i=new Ut(t,e),this.#n=new Proxy(this.#i,{has:function(t,e){return t.hasProperty(e)},get:function(t,e){return t.getProperty(e)},set:function(t,e,i){return t.setProperty(e,i)},deleteProperty:function(t,e){return t.deleteProperty(e)}})}get data(){return this.#n}get handle(){return this.#i}updateData(t){this.#i.updateData(t)}resetCache(){this.#i.resetCache()}}const qt=/(\\?)(\$\{(([a-zA-Z0-9\-_\s]+)::)?([^\{\}]+)\})/,Gt=new Map,Xt=new Ft,Jt=t=>t instanceof Ft?t:new Ft(t),Qt=async function(t,e,i,n){if(i&&t.name!=i)return t.parent?Qt(t.parent,e,i,n):null;const s=await async function(t,e){if("string"!=typeof t)return t;if(null==(t=Zt(t)))return t;try{const i=(t=>{if(Gt.has(t))return Gt.get(t);const e=new Function("context",`\nreturn (async (context) => {\n\ttry{ \n\t\twith(context){\n\t\t\t return ${t}\n\t\t}\n\t}catch(e){\n\t\tthrow e;\n\t}\n})(context);`);return Gt.set(t,e),e})(t);return await i(e)}catch(e){console.error(`Error by statement "${t}":`,e)}}(e,t.proxy.data);return null!=s?s:n instanceof Ft&&n.hasValue?n.value:void 0},Wt=async(t,e,i)=>e[1]?e[2]:Qt(t,e[5],Zt(e[4]),i),Zt=t=>t?0==(t=t.trim()).length?null:t:null;class Kt{constructor({context:t=Rt.default,parent:e=null,name:i=null}){this.parent=e instanceof Kt?e:null,this.name=i,this.context=t,this.proxy=new Bt(this.context,this)}get chain(){return this.parent?this.parent.chain+"/"+this.name:"/"+this.name}get effectiveChain(){return this.context?this.parent?this.parent.effectiveChain+"/"+this.name:"/"+this.name:this.parent?this.parent.effectiveChain:""}get contextChain(){const t=[];let e=this;for(;e;)e.context&&t.push(e.context),e=e.parent;return t}getData(t,e){if(t){if(!e||e==this.name){const e=Et.load(this.context,t,!1);return e?e.value:null}this.parent&&this.parent.getData(t,e)}}updateData(t,e,i){t&&(i&&i!=this.name?this.parent&&this.parent.updateData(t,e,i):(null!=this.context&&void 0!==this.context||(this.context={},this.proxy.updateData(this.context)),Et.load(this.context,t).value=e,this.proxy.resetCache()))}mergeContext(t,e){e&&e!=this.name?this.parent&&this.parent.mergeContext(t,e):this.context=this.context?$t.merge(this.context,t):t}async resolve(t,e){const i=2==arguments.length?Jt(e):Xt;try{const e=qt.exec(t);return e?await Wt(this,e,i):await Qt(this,Zt(t),null,i)}catch(e){return console.error('error at executing statment"',t,'":',e),i.hasValue?i.value:t}}async resolveText(t,e){let i=t,n=t,s=qt.exec(i);const a=2==arguments.length?Jt(e):Xt;for(;null!=s;){const t=await Wt(this,s,a);n=n.split(s[0]).join(),i=i.split(s[0]).join(void 0===t?"undefined":null==t?"null":t),s=qt.exec(n)}return i}static async resolve(t,e,i,n){const s=new Kt({context:e}),a=arguments.length>2?Jt(i):Xt;return"number"==typeof n&&n>0?new Promise((e=>{setTimeout((()=>{e(s.resolve(t,a))}),n)})):s.resolve(t,a)}static async resolveText(t,e,i,n){const s=new Kt({context:e}),a=arguments.length>2?Jt(i):Xt;return"number"==typeof n&&n>0?new Promise((e=>{setTimeout((()=>{e(s.resolveText(t,a))}),n)})):s.resolveText(t,a)}static buildSecure({context:t,propFilter:e,option:i={deep:!0},name:n,parent:s}){return t=$t.filter({data:t,propFilter:e,option:i}),new Kt({context:t,name:n,parent:s})}}const Yt=class{#s;#a;constructor(t){this.#s=t}async init(){}get condition(){return this.#a||(this.#a=this.#s.attr(lt)||!1),this.#a}async validate(t){const e=this.#s;let i=this.condition;const n=e.condition;try{i=!i||await Kt.resolve(i,t,!1)}catch{i=!1}return i!=n&&(e.condition=i),i}},te=class{#s;#a=null;constructor(t){this.#s=t}async init(){}get condition(){return null==this.#a&&(this.#a=(this.#s.attr(dt)||"").trim()||!1),this.#a}async validate(t){let e=!0;const i=this.#s.editable,n=this.condition;try{e=!n||await Kt.resolve(n,t,!1)}catch{e=!1}return e!=i&&(this.#s.editable=e),e}},ee=t=>null==t||void 0===t;function ie(...t){const e=t=>t&&"object"==typeof t;return t.reduce(((t,i)=>(Object.keys(i).forEach((n=>{const s=t[n],a=i[n];Array.isArray(s)&&Array.isArray(a)?t[n]=s.concat(...a):e(s)&&e(a)?t[n]=ie(s,a):t[n]=a})),t)),{})}const ne=async(t,e,i)=>(ee(i)||(e?re(t,e,i):t=ie(t,i)),t),se=async(t,e)=>{let i={};if(e)for(let n of e){const e=n.name,s=t.get(n);i=await ne(i,e,s)}else for(let[{name:e},n]of t)i=await ne(i,e,n);return i},ae=/\./g,re=function(t,e,i){const n=e.split(ae);if(2==arguments.length)return le(t,n);const s=ee(i);return ee(t)&&s?t:oe(s,t,i,n)},oe=(t,e,i,n)=>{if(ee(e)&&t)return null;const s=n.shift();return 0==n.length?t?delete e[s]:e[s]=i:(e[s]=e[s]||{},oe(t,e[s],i,n)),e},le=(t,e)=>{if(ee(t))return null;if(0==e.length)return t;const i=e.shift();return le(t[i],e)},ce=(t,e)=>{if(null!=e)for(let i of e)t.add(i);return t},ue=({root:t,filter:e})=>{let i=[];return t.children.forEach((t=>{const{accept:n,stop:s=!1}=e(t);if(n&&i.push(t),!s){const n=ue({root:t,filter:e});n instanceof Array?i=i.concat(n):n&&i.push(n)}})),i},he=function(t,e){const i=t.NODENAME;customElements.get(i)||customElements.define(i,t,e)},de=[ct,lt];class pe extends kt{static get observedAttributes(){return de}static get NODENAME(){return m}constructor(){super()}async init(){await super.init(),this.active=!1}async destroy(){this.trigger(G),await super.destroy()}get active(){return this.hasAttribute(ct)}set active(t){t?this.attr(ct,""):this.attr(ct,null)}get condition(){return this.attr(lt)}async validate({hasValue:t,data:e}){const i=!t||await Kt.resolve(this.condition,e,!1);return this.active=!i,i}}he(pe);const fe=pe,ge=async(t,e)=>(await Promise.all(e.map((e=>e.validate(t))))).reduce(((t,e)=>!!t&&e),!0),ye=class{#s=null;#r=new Set;#o=new Set;constructor(t){this.#s=t,t.on(G,(t=>{t.stopPropagation(),this.#r.delete(t.target)}))}async init(){const t=this.#s,{form:e,id:i,name:n}=t,s=this.validations;var a;i&&0!=i.length&&(ce(s,e.find(`${m}[for="${i}"]`)),ce(s,e.find(`${m}[for="#${i}"]`))),n&&0!=n.length&&ce(s,e.find(`${m}[for="${n}"]`)),ce(s,ue({root:a=t,filter:t=>{if(a!=t){if(t instanceof Oe)return{accept:!1,stop:!0};if(t instanceof fe&&null==t.attr("for"))return{accept:!0,stop:!0}}return{accept:!1}}}))}get validations(){return this.#r}get customValidations(){return this.#o}addCustomValidation(t){this.#o.add(t)}async validate(t){const e=this.#s,{hasValue:i,required:n,condition:s,editable:a}=e;let r=!0;if(s){r=!n||i;const o={hasValue:i,required:n,condition:s,editable:a,data:t,base:e};r=await(async(t,e)=>0==t.size||(await Promise.all(Array.from(t).map((t=>t(e))))).every((t=>t)))(this.#o,o)&&r,r=await(async(t,e)=>0==t.size||(await Promise.all(Array.from(t).map((t=>t.validate(e))))).every((t=>t)))(this.#r,o)&&r}return e.valid=r,r}},me="active",ve="condition",be=[me,ve];class we extends kt{static get observedAttributes(){return be}static get NODENAME(){return v}constructor(){super()}async init(){await super.init()}async destroy(){this.trigger(X),await super.destroy()}get active(){return this.hasAttribute(me)}set active(t){t?this.attr(me,""):this.attr(me,void 0)}get condition(){return this.attr(ve)}async update(t){await this.ready,this.active=await Kt.resolve(this.condition,t,!1)}}he(we);const xe=we,Ae=class{#s=null;#l=new Set;constructor(t){this.#s=t,t.on(X,(t=>{t.preventDefault(),t.stopPropagation();const e=t.target;this.#l.delete(e)}))}async init(){const t=this.#s,{form:e,id:i,name:n}=t,s=this.messages;var a;i&&0!=i.length&&(ce(s,e.find(`${v}[for="${i}"]`)),ce(s,e.find(`${v}[for="#${i}"]`))),n&&0!=n.length&&ce(s,e.find(`${v}[for="${n}"]`)),ce(s,ue({root:a=t,filter:t=>{if(a!=t){if(t instanceof Oe)return{accept:!1,stop:!0};if(t instanceof xe&&null==t.attr("for"))return{accept:!0,stop:!0}}return{accept:!1}}}))}get messages(){return this.#l}async validate(t){for(let e of this.#l)e.update(t)}},Ee=new WeakMap,Ne=function(t,e,i){const n=(t=>{if(Ee.has(t))return Ee.get(t);const e={};return Ee.set(t,e),e})(t);if(1===arguments.length)return n;if(2===arguments.length)return n[e];if(3!==arguments.length)throw new Error("Not allowed size of arguments!");n[e]=i},Pe=t=>function(e,i){if(2!=arguments.length)return Ne(e,t);Ne(e,t,i)},Ve=(t,e,i=!1)=>{const n=t.active;e?t.attr(ct,""):t.attr(ct,null),(n!=e||i)&&t.trigger(J)},Te=Pe("form"),Me=[ct,pt,lt,vt,bt,dt],Oe=class extends kt{static get observedAttributes(){return Me}#c=!1;#u;#h;#d;#p;constructor(){super(),this.#p=new Ae(this),this.#u=new Yt(this),this.#h=new te(this),this.#d=new ye(this)}async init(){await super.init(),this.#c||(this.#c=!0,await this.#u.init(),await this.#p.init(),await this.#d.init(),await this.#h.init())}get id(){return(super.id||"").trim()}get name(){return(super.name||"").trim()}get validationHandle(){return this.#d}get messageHandle(){return this.#p}addValidation(t){this.#d.addCustomValidation(t)}async validate(t){this.attr(mt,"");const e=Object.assign({},t,await(async t=>{await t.ready;const e={};e.$value=await t.rawValue();let i=t.parent(d),n=e;for(;i;)n[K]=await i.rawValue(),n=n[K],i=i.parent(d);return e})(this));return await this.#u.validate(e),await this.#h.validate(e),await this.#d.validate(e),this.attr(mt,null),await this.#p.validate(e),this.valid}get form(){let t=Te(this);return t||(t=this.parent(a),Te(this,t)),t}get active(){return this.hasAttribute(ct)}set active(t){this.active!=t&&(Ve(this,t),this.activeUpdated())}async activeUpdated(){}get readonly(){return this.hasAttribute(pt)}set readonly(t){((t,e,i=!1)=>{const n=t.readonly;e?t.attr(pt,""):t.attr(pt,null),(n!=e||i)&&t.trigger(Z)})(this,!this.editable||t,!this.ready.resolved),this.readonlyUpdated()}async readonlyUpdated(){}get editable(){return this.hasAttribute(ht)}set editable(t){((t,e,i=!1)=>{const n=t.editable;e?t.attr(ht,""):t.attr(ht,null),(n!=e||i)&&t.trigger(W)})(this,t,!this.ready.resolved),this.editableUpdated(),this.readonly=!t}async editableUpdated(){}set condition(t){var e,i;e=this,void 0===(i=t)||null==i?(e.attr(bt,null),e.attr(vt,null)):i?(e.attr(bt,null),e.attr(vt,"")):(e.attr(vt,null),e.attr(bt,"")),e.trigger(D),this.conditionUpdated()}get condition(){return!this.hasAttribute(bt)}async conditionUpdated(){}set valid(t){((t,e)=>{void 0===e||null==e?(t.attr(yt,null),t.attr(gt,null)):e?(t.attr(yt,null),t.attr(gt,"")):(t.attr(yt,""),t.attr(gt,null)),t.trigger(Q)})(this,t),this.validUpdated()}get valid(){return this.hasAttribute(gt)}async validUpdated(){}},Le=t=>{if(ee(t))return!0;const e=typeof t;return"string"===e&&0==t.trim().length||!(t instanceof Date)&&(t instanceof Array&&0==t.length||t instanceof Set&&0==t.length||t instanceof Map&&0==t.length||"object"==e&&0==Object.getOwnPropertyNames(t).length)},Ce=Pe("parent"),Se=[Y,ot,ft];class $e extends Oe{static get observedAttributes(){return Se.concat(Oe.observedAttributes)}#f=null;constructor(t={}){super(t);const{value:e}=t;this.#f=e,this.root.on(z,(t=>{t.stopPropagation(),t.preventDefault()}))}async init(){this.ready.then((()=>this.trigger(F))),await super.init()}async destroy(){this.publishValue(null),await super.destroy(),this.trigger(U)}get parentField(){let t=Ce(this);return t||(t=(()=>{let t=this.parentNode;for(;t;){if(t instanceof $e)return t;t=t.parentNode}return null})(),Ce(this,t)),t}async conditionUpdated(){this.active=this.condition,await this.publishValue()}get name(){return this.getAttribute(Y)}get required(){return this.hasAttribute(ot)}get hasValue(){return!this.hasAttribute(ft)}async rawValue(t){if(0===arguments.length)return this.#f;this.#f=await t}async value(t){const{condition:e,valid:i,ready:n}=this,s=await this.rawValue();if(0==arguments.length)return e&&i?s:null;if(await n,await this.acceptValue(t)&&s!=(t=await this.normalizeValue(t)||t)){const e=await this.updatedValue(t);void 0!==e&&(t=e),await this.publishValue(t)}}async validate(t){const e=this.condition,i=this.valid,n=await super.validate(t),s=this.condition;return this.validationStateChanged(e!=s,i!=n),n}async validationStateChanged(t,e){(t||e)&&this.publishValue()}async updatedValue(t){return this.trigger(z,t),t}async publishValue(t){await this.ready,0===arguments.length?t=await this.rawValue():await this.rawValue(t);const e=Le(t),i=this.condition;var n;t=this.required&&e||!i?null:t,n=!e,this.attr(ft,n?null:""),this.parentField?await this.parentField.childValueChanged(this,t):this.form&&await this.form.childValueChanged(this,t)}async acceptValue(t){return!0}async normalizeValue(t){return t}async childValueChanged(t,e){}}const De=$e,ze=(t,e,i,n)=>{let s=null;const a="function"==typeof e?e:()=>e,r="function"==typeof i?i:()=>i;return e=>{a(e)&&e.preventDefault(),r(e)&&e.stopPropagation();const i=(t=>({type:t.type,target:t.target,detail:t.detail,currentTarget:t.currentTarget,explicitOriginalTarget:t.explicitOriginalTarget,originalTarget:t.originalTarget,srcElement:t.srcElement,timeStamp:t.timeStamp}))(e);s&&clearTimeout(s),s=setTimeout((()=>{s=null,t(i)}),n||10)}};class He{static findInput(t){return null}constructor(t,e){this.field=t,this.input=e}async init(){}set readonly(t){}async acceptValue(t){return!0}async normalizeValue(t){return t}async updatedValue(){}get value(){return null}get valid(){return!0}}const je="text",_e=t=>({accept:t=>"number"==typeof t,getValue:()=>t.valueAsNumber,setValue:e=>{t.valueAsNumber=e},normalize:t=>ee(t)||Number.isNaN(t)?null:t}),Ie=t=>({accept:t=>t instanceof Date||"string"==typeof t||"number"==typeof t,getValue:()=>t.valueAsDate,setValue:e=>{t.valueAsDate=e},normalize:t=>t?t instanceof Date?t:new Date(t):null}),ke=new Intl.DateTimeFormat("default",{hour:"numeric",minute:"numeric"}),Re={text:t=>({accept:t=>"string"==typeof t,getValue:()=>t.value,setValue:e=>t.value=e,normalize:t=>t&&(t=t.trim()).length>0?t:null}),number:_e,datetime:Ie,"datetime-local":Ie,date:Ie,time:t=>({accept:t=>t instanceof Date,getValue:()=>t.value?new Date(`1970-01-01T${t.value}`):null,setValue:e=>{t.value=ke.format(e)},normalize:t=>t||null}),range:_e},Fe=(t,e)=>new Promise((i=>{const n=new FileReader;n.addEventListener("loadend",(()=>{i({name:t.name,type:t.type,size:t.size,data:n.result})}),!1),n[e](t)})),Ue={"form-input":async t=>(t.format="form-input",t),"data-url-base64":async t=>{const e=await Fe(t,"readAsDataURL");return e.format="data-url-base64",e},base64:async t=>{const e=await Fe(t,"readAsDataURL");return e.data=e.data.substr(e.data.indexOf(",")+1),e.format="base64",e}},Be=async(t,e,i)=>{let n=[];for(let i of t)n.push(await Ue[e](i));return 0==n.length?null:i?n:n[0]},qe=[class extends He{static findInput(t){return t.find('input:not([type="file"],[type="radio"],[type="checkbox"],[type="button"],[type="submit"],[type="reset"]),input:not([type]), textarea').first()}constructor(t,e){super(t,e)}init(){const{field:t,input:e}=this,i=(t.attr("input-type")||e.attr("type")||je).trim().toLowerCase();this.type=(Re[i]||Re[je])(e),e.on("input",ze((()=>{t.trigger(_,this.normalizeValue(this.value))}),!1,!0,s)),t.trigger(_,this.normalizeValue(this.value))}acceptValue(t){return null==t||void 0===t||this.type.accept(t)}normalizeValue(t){return null==t&&void 0===t?null:this.type.normalize(t)}async updatedValue(t){t!=this.type.getValue()&&this.type.setValue(t)}set readonly(t){this.input.attr("disabled",t?"":null)}get value(){return this.type.getValue()}get valid(){return this.input.checkValidity()}},class extends He{static findInput(t){const e=t.find('input[type="checkbox"]');return 0==e.length?null:1==e.length?e.first():e}constructor(t,e){super(t,e)}init(){const{field:t,input:e}=this;this.multiple=e instanceof NodeList,e.on("input",ze((()=>{t.trigger(_,this.normalizeValue(this.value))}),!1,!0,s)),t.trigger(_,this.normalizeValue(this.value))}set readonly(t){this.input.attr("disabled",t?"":null)}get value(){const t=this.input.val();if(!(t instanceof Map))return t;if(0==t.size)return null;const e=[];return t.forEach((t=>{e.push(t)})),e}normalizeValue(t){return t?this.multiple?0!=(t=t.filter((t=>!!t))).length?t:null:t:null}acceptValue(t){if(null==t||void 0===t)return!0;if(this.multiple)return t instanceof Array;{const e=typeof t;return"string"===e||"boolean"===e}}updatedValue(t){this.input.val(t||null)}},class extends He{static findInput(t){const e=t.find('input[type="radio"]');return 0==e.length?null:e}constructor(t,e){super(t,e)}init(){const{field:t,input:e}=this,i=t.name+Math.floor(Math.random()*Date.now());for(let t of e)t.name=i;e.on("input",ze((()=>{t.trigger(_,this.normalizeValue(this.value))}),!1,!0,s)),t.trigger(_,this.normalizeValue(this.value))}set readonly(t){this.input.attr("disabled",t?"":null)}get value(){const t=this.input.val();return t instanceof Map?0==t.size?null:t.values().next().value:t}normalizeValue(t){return t||null}acceptValue(t){if(null==t||void 0===t)return!0;{const e=typeof t;return"string"===e||"boolean"===e}}updatedValue(t){this.input.val(t||null)}},class extends He{static findInput(t){return t.find('input[type="file"]').first()}#f=null;constructor(t,e){super(t,e)}async init(){await super.init();const{field:t,input:e}=this;this.multiple=e.multiple,this.format=t.attr("file-format")||"form-input",this.filenameTarget=t.attr("file-name-target"),this.filenameTarget=this.filenameTarget?t.find(this.filenameTarget).first():null;const{format:i,multiple:n}=this;e.on("input",ze((async()=>{this.updatedValue(await Be(e.files,i,n)),t.trigger(_,this.value)}),!1,!0)),e.files&&0!=e.files.length&&this.updatedValue(await Be(e.files,i,n)),t.trigger(_,this.value)}set readonly(t){this.input.attr("disabled",t?"":null)}acceptValue(t){return null==t||void 0===t||(this.multiple?t instanceof Array:"object"==typeof t)}normalizeValue(t){return null==t||void 0===t?null:this.multiple?0!=t.length?t:null:t}updatedValue(t){if(t!=this.#f){this.#f=t,t||(this.input.value=null);const e=this.filenameTarget;if(e&&(e.empty(),t))if(this.multiple)for(let i of t)e.append(`<span>${i.name}</span>`);else e.append(`<span>${t.name}</span>`)}}get value(){return this.#f}get valid(){return this.input.checkValidity()}},class extends He{static findInput(t){return t.find("select").first()}constructor(t,e){super(t,e)}init(){const{field:t,input:e}=this;e.on("input, changed",ze((()=>{t.trigger(_,this.value)}),!1,!0,s))}set readonly(t){this.input.attr("disabled",t?"":null)}get value(){return this.normalizeValue(this.input.multiple?this.input.val():this.input.value)}normalizeValue(t){return t?this.input.multiple?0!=(t=t.filter((t=>t&&t.trim().length>0))).length?t:null:0!=(t=t.trim()).length?t:null:null}acceptValue(t){return null==t||void 0===t||(this.input.multiple?t instanceof Array:"string"==typeof t)}updatedValue(t){const e=this.input.val();this.field.value!=this.value&&this.input.val(t||e)}}],Ge=["file-format"];class Xe extends De{static get observedAttributes(){return Ge.concat(De.observedAttributes)}static get NODENAME(){return l}#c=!1;#g;constructor(t){super(t),this.on(_,(t=>{t.preventDefault(),t.stopPropagation(),this.publishValue(t.detail||null)}))}async init(){await super.init(),this.#c||(this.#c=!0,this.#g=(t=>{for(let e of qe){const i=e.findInput(t);if(i)return new e(t,i)}return null})(this),this.#g&&(await this.#g.init(),this.addValidation((async()=>this.#g.valid)),this.publishValue(this.#g.value)))}readonlyUpdated(){this.#g&&(this.#g.readonly=this.readonly)}async acceptValue(t){return!!this.#g&&this.#g.acceptValue(t)}async normalizeValue(t){return this.#g?this.#g.normalizeValue(t):t}async updatedValue(t){await this.ready,t=await t;const e=this.#g;e&&((e.value||null)!=t&&await e.updatedValue(t),await super.updatedValue(e.value))}async validationStateChanged(t,e){if(t&&this.condition){const t=this.#g.value||null;this.rawValue(t)}return super.validationStateChanged(t,e)}}he(Xe);const Je=Xe,Qe=[];class We extends De{static get observedAttributes(){return Qe.concat(De.observedAttributes)}static get NODENAME(){return c}#y=null;#f=new Map;constructor(t){super(t);const e=this.root;e.on(F,(t=>{const e=t.target;e!=this&&(!(e instanceof De)||this.#y&&this.#y.has(e)||(this.#y=null),t.stopPropagation())})),e.on(U,(t=>{const e=t.target;e!=this&&(e instanceof De&&this.#y&&this.#y.has(e)&&this.#y.delete(e),t.stopPropagation())})),this.addValidation((async({data:t})=>await ge(t,this.fields)))}get fields(){return this.#y||(this.#y=new Set(ue({root:this,filter:t=>t instanceof De?{accept:!0,stop:!0}:{accept:!1}}))),Array.from(this.#y)}readonlyUpdated(){const{readonly:t,fields:e}=this;if(e)for(let i of e)i.readonly=t}async updatedValue(t){await this.ready;const e=this.#f;e.clear();const i=this.fields;i&&await Promise.all(i.map((async i=>{const n=i.name?re(t,i.name):t;ee(n)||e.set(i,n),await i.value(n)})));let n=await se(this.#f,i);return 0==Object.getOwnPropertyNames(n).length&&(n=null),n}async childValueChanged(t,e){e=await e;const i=this.#f;if(t){const n=i.has(t),s=i.get(t);if(n&&s==e)return;ee(e)?i.delete(t):i.set(t,e)}let n=await se(i,this.fields);0==Object.getOwnPropertyNames(n).length&&(n=null),await this.publishValue(n)}}he(We);const Ze=We,Ke=[ct,ut],Ye=class extends kt{static get observedAttributes(){return Ke}#c=!1;#m;constructor(){super(),this.on("click",(t=>{t.preventDefault(),t.stopPropagation(),this.active&&!this.disabled&&this.execute()}))}async init(){this.attr("tabindex","0").attr("role","button"),await super.init(),this.#c&&(this.#c=!0,this.active=!1,this.disabled=!1)}get form(){return this.#m||(this.#m=this.parent(a)),this.#m}get active(){return this.hasAttribute(ct)}set active(t){this.attr(ct,t?"":null)}get disabled(){return this.hasAttribute(ut)}set disabled(t){this.attr(ut,t?"":null)}execute(){console.log("execute")}},ti=[];he(class extends Ye{static get observedAttributes(){return ti.concat(ti)}static get NODENAME(){return f}constructor(){super()}async init(){await super.init(),this.active=!0}execute(){this.trigger(k)}});const ei=[];he(class extends kt{static get observedAttributes(){return ei}static get NODENAME(){return h}constructor(){super()}});const ii=[];class ni extends Ze{static get observedAttributes(){return ii.concat(Ze.observedAttributes)}static get NODENAME(){return d}constructor(t){super(t)}get active(){return!0}set active(t){}get condition(){return!0}get name(){return null}}customElements.define(ni.NODENAME,ni);const si=`${p}:initialized`,ai=[];he(class extends Ye{static get observedAttributes(){return ai.concat(ai)}static get NODENAME(){return p}constructor(){super(),this.ready.then((()=>this.trigger(si)))}async init(){await super.init(),this.active=!0}execute(){this.trigger(I)}});const ri=[wt,xt],oi=async(t,e)=>{let i=[];for(let n of t)i.push(e.get(n));return 0==i.length&&(i=null),i};class li extends De{static get observedAttributes(){return ri.concat(De.observedAttributes)}static get NODENAME(){return u}#v;#b;#w=new Map;#x;#c=!1;constructor(t){super(t);const e=this.root;e.on(si,(t=>{this.#x=t.target,t.stopPropagation()})),e.on(F,(t=>{t.target!=this&&(t.preventDefault(),t.stopPropagation())})),e.on(I,(t=>{t.preventDefault(),t.stopPropagation();const{readonly:e}=this;e||this.createRow()})),e.on(k,(t=>{t.preventDefault(),t.stopPropagation();const{rows:e,readonly:i}=this;if(!i){const i=t.target.parent(d);e.indexOf(i)>=0&&i.remove()}})),this.addValidation((async()=>{const{rows:t,min:e,max:i,readonly:n}=this,s=t.length;return this.#x&&!n&&(s==i?this.#x.disabled=!0:s<i&&(this.#x.disabled=!1)),e<=s&&s<=i})),this.addValidation((async t=>await ge(t,this.rows)))}async init(){if(await super.init(),!this.#c){this.#c=!0;const t=this.find("template").first();t&&(this.#v=t.content),this.#b=this.find(h).first()}}readonlyUpdated(){const{readonly:t}=this;for(let e of this.rows)e.readonly=t}get rows(){return this.#b?Array.from(this.#b.children):[]}get min(){return this.hasAttribute(wt)?Math.max(0,parseInt(this.attr(wt))):0}get max(){return this.hasAttribute(xt)?parseInt(this.attr(xt)):Number.MAX_SAFE_INTEGER}acceptValue(t){return!t||t instanceof Array}normalizeValue(t){return t?t.filter((t=>!!t)):null}async createRow(t){const e=document.importNode(this.#v,!0).children[0];return await this.#b.append(e),t&&await e.value(t),e}async updatedValue(t){return this.#w.clear(),this.#b.empty(),t&&await Promise.all(t.map((t=>this.createRow(t)))),await oi(this.rows,this.#w)}async childValueChanged(t,e){e=await e;const i=this.#w;ee(e)?this.#w.delete(t):this.#w.set(t,e),await super.childValueChanged(t,e);const n=await oi(this.rows,i);await this.publishValue(n)}}he(li);const ci=li,ui=[st];class hi extends Ze{static get observedAttributes(){return ui.concat(Ze.observedAttributes)}static get NODENAME(){return o}constructor(t){super(t),this.ready.then((()=>this.trigger(B)))}async destroy(){this.trigger(q),await super.destroy()}get step(){return this.attr(st)}conditionUpdated(){}}he(hi);const di=hi,pi=[];he(class extends Ye{static get observedAttributes(){return pi}static get NODENAME(){return w}constructor(){super()}execute(){this.form.toPrevPage()}});const fi=[];he(class extends Ye{static get observedAttributes(){return fi}static get NODENAME(){return x}constructor(){super()}execute(){this.form.toNextPage()}});const gi=[];he(class extends Ye{static get observedAttributes(){return gi}static get NODENAME(){return A}constructor(){super()}execute(){this.form.toNextPage()}});const yi="success",mi="fail",vi=class{static get STATE_SUCCESS(){return yi}static get STATE_FAIL(){return mi}constructor(t,e,i,n,s){this.action=t,this.state=e,this.message=i,this.data=n,this.context=s}},bi=class extends kt{static STATES={FAIL:mi,SUCCESS:yi};constructor(){super()}#c=!1;#m;async init(){await super.init(),this.#c||(this.#c=!0,this.style.display="none",this.#m=this.parent(a),this.#m&&this.trigger(C))}get form(){return this.#m}async accept(t={}){const e=this.attr(lt);return!e||await Kt.resolve(e,t,!1)}async execute(t={},e={}){return new vi(mi,"not implemented",null,t,e)}},wi=[];he(class extends Ye{static get observedAttributes(){return wi}static get NODENAME(){return E}#c=!1;#a;#A;constructor(){super()}async init(){await super.init(),this.#c&&(this.#c=!0,this.#a=this.attr(lt))}get actions(){if(!this.#A){const t=[],e=this.children;for(let i of e)i instanceof bi&&t.push(i);this.#A=t}return this.#A}get condition(){return this.#a}execute(){this.form.submit({actions:this.actions})}});const xi={active:!1,disabled:!1};class Ai{#E;#N=!1;#P=!1;constructor(t){this.#E=t,this.#E.forEach((t=>{t.active=this.#N,t.disabled=this.#P}))}get active(){return this.#N}set active(t){this.#N=t,this.#E.forEach((t=>t.active=this.#N))}get disabled(){return this.#P}set disabled(t){this.#P=t,this.#E.forEach((t=>t.disabled=this.#P))}}const Ei=[];he(class extends kt{static get observedAttributes(){return Ei}static get NODENAME(){return b}#m;#V;#T;#M;#O;#c=!1;constructor(){super()}async init(){await super.init(),this.#c||(this.#c=!0,this.#m=this.parent(a),this.#V=this.find(w).first()||xi,this.#T=this.find(x).first()||xi,this.#M=this.find(A).first()||xi,this.#O=new Ai(this.find(E)||[xi]),this.#m.on([L,j,H],(()=>{this.update()})))}async update(){const t=this.#m,e=t.state,i=this.#V,n=this.#T,s=this.#M,a=this.#O;if(i.active=!0,i.disabled=!0,n.active=!1,n.disabled=!0,s.active=!1,s.disabled=!0,a.active=!1,a.disabled=!0,e==P)return;const{activePageIndex:r,activePage:o,nextPage:l,pages:c,useSummaryPage:u}=t,h=null!=await l;e==M?(i.disabled=!0,a.active=!0):e==T?(i.disabled=!1,a.active=!0,a.disabled=!t.valid):e==V&&(i.disabled=r<=0,h||!o.valid&&r+1<c.length?(n.active=!0,n.disabled=!o||!o.valid):u&&e==V?(s.active=!0,s.disabled=!o||!o.valid):(a.active=!0,a.disabled=!t.valid))}});const Ni=[Y,ct,pt];he(class extends kt{static get observedAttributes(){return Ni}static get NODENAME(){return y}constructor(){super()}get name(){return this.attr(Y)}get active(){return this.hasAttribute(ct)}set active(t){this.active!=t&&Ve(this,t)}get readonly(){return this.hasAttribute(pt)}set readonly(t){t?this.attr(pt,""):this.attr(pt,null)}});const Pi=[At];he(class extends kt{static get observedAttributes(){return Pi}static get NODENAME(){return g}#m;#L;#c=!1;constructor(){super(),this.on("click",(({target:t})=>{if(!this.#m)return;if(t==this)return;const e=t.is(y)?t:t.parent(y),i=this.#m;if(!e)return;const{state:n,pages:s,activePage:a}=i,r=e.name;if(n==V||n==T){const t=((t,e,i)=>{for(let n of t){if(n.step==e&&n.condition)return n;if(n==i)return}return null})(s,r,a);t&&(i.activePage=t)}}))}async init(){if(await super.init(),this.progress=0,!this.#c){const t=this.#m=this.parent(a);this.#L=this.find(y),this.#m.on([H,j],(()=>{const e=t.state;if(P==e)return;const{activePageIndex:i,activePage:n,pages:s}=t;if(!n)return;const a=s.length,r=n?n.step:N,o=Math.floor(100*i/a);for(let t of this.steps){const i=t.name;e==V?(t.active=i==r,t.readonly=!1):e==T?(t.active=i==T,t.readonly=!1):(t.active=i==M,t.readonly=!0)}this.progress=e==T||e==M?100:o,this.trigger(R)})),this.#c=!0}}get steps(){return Array.from(this.#L)}get progress(){return this.attr(At)}set progress(t){this.style.setProperty&&this.style.setProperty("--progress",t+"%"),this.attr(At,Math.max(0,Math.min(t,100)))}});const Vi=`${r}-default`;class Ti extends bi{static get NODENAME(){return Vi}constructor(t,e){super(),this.endpoint=t,this.method=e}async execute(t={},e={}){let i=this.endpoint;i=await Kt.resolveText(i,t,i);const n=new URL(i,location),s=await fetch(n,{method:this.method,credentials:"include",mode:"cors",headers:{"content-type":"application/json"},body:JSON.stringify(t)});return new vi(this,s.ok?yi:mi,s,t,e)}}he(Ti);const Mi=Ti;i(353),i(16),["\\","?","[","]","{","}","(",")",".","^","$"].map((t=>({f:new RegExp("\\"+t,"g"),v:"\\"+t})));const Oi=[Y,at,tt,et,it,nt,rt],Li=(t,e)=>{for(let i of t.pages)i.readonly=e,i.active=e};class Ci extends kt{static get observedAttributes(){return Oi}static get NODENAME(){return a}#c=!1;#C=N;#S;#f=new Map;#n={};#$=null;#A=null;constructor(){super();const t=this.root;t.on(B,(t=>{t.preventDefault(),t.stopPropagation()})),t.on(q,(t=>{const e=t.target;this.#S=null,this.childValueChanged(e,null),t.preventDefault(),t.stopPropagation()})),this.ready.then((()=>this.trigger(L)))}async init(){await super.init(),this.#c||(this.#c=!0,this.activePageIndex=-1,this.state=N,this.useSummaryPage=this.hasAttribute(at),this.activePageIndex=-1,this.pages.length>0&&this.toNextPage())}get pages(){return this.#S||(this.#S=Array.from(this.root.find(o))),this.#S}get state(){return this.#C}set state(t){const e=this.#C;t!=P&&(e==V&&t!=V?Li(this,!0):e!=V&&t==V&&(Li(this,!1),this.activePage&&(this.activePage.active=!0))),this.#C=t,e!=t&&this.trigger(j),this.attr(nt,t)}get valid(){for(let t of this.pages)if(t.condition&&!t.valid)return!1;return!0}async value(t){return await this.ready,this.#$&&await this.#$,0==arguments.length?this.#n:this.state!=V?await new Promise((e=>{const i=n=>{n.stopPropagation(),this.removeOn(i,j),e(this.value(t))};this.on(j,i)})):(await Promise.all(this.pages.map((e=>{const i=e.name;return i?e.value(re(t,i)):e.value(t)}))),void await this.#D())}get activePage(){return 0<=this.activePageIndex&&this.activePageIndex<this.pages.length?this.pages[this.activePageIndex]:null}set activePage(t){const e=this.activePage;t==e&&this.state==V||(e&&(e.active=!1),this.activePageIndex=this.pages.indexOf(t),t.active=!0,this.state!=V&&(this.state=V),e&&this.scrollIntoView(),this.trigger(H))}get prevPage(){return(async()=>{const t=this.pages;for(let e=this.activePageIndex-1;e>=0;e--){const i=t[e];if(await this.#D(i),i.condition)return i}return null})()}get nextPage(){return(async()=>{const t=this.pages,e=this.activePageIndex+1;if(t)for(let i=e;i<t.length;i++){const e=t[i];if(await e.validate(this.#n),e.condition)return e}return null})()}async toPrevPage(){if(this.state!=V)this.state=V;else{const t=await this.prevPage;t&&(this.activePage=t)}}async toNextPage(){const t=await this.nextPage;t?(this.activePage=t,this.state=V):this.useSummaryPage?this.summary():this.submit()}async summary(){this.state=T}get submitActions(){if(!this.#A){const t=[],e=this.attr(et);if(e){const t=this.attr(it)||"post";this.append(new Mi(e,t))}const i=this.children;for(let e of i)e instanceof bi&&t.push(e);this.#A=t}return this.#A}async submit({data:t=null,actions:e=[],context:i={}}={}){const n=this.state;this.state="submitting";let s=await this.value();if(!await ge(s,this.pages))return;if(t&&(s=$t.merge(s,t)),e=e.concat(this.submitActions)){const t=await(async(t,e,i)=>{const n=[];for(let s of t)if(await s.accept(e))try{const t=await s.execute(e,i)||new vi(s,yi,null,e,i);if(n.push(t),t.state==mi)return n;void 0!==t.data&&null!=t.data&&(e=t.data),void 0!==t.context&&t.data!=i&&(e=t.data)}catch(t){return n.push(new vi(s,mi,t)),n}return n})(e,s,i);this.trigger($,t)}this.trigger(S,s);const a=(this.attr(tt)||"").trim();a.length>0&&this.trigger(a,s),this.state=this.hasAttribute(rt)?n:M}async validate(){await this.#D()}async#D(t){const e=zt(),i=async()=>{const i=this.#n,n=t?await t.validate(i):await ge(i,this.pages);e.resolve(n),this.#$==e&&(this.state=V,this.#$=null)};return null==this.#$?(setTimeout(i,1),this.state=P):this.#$.then(i),this.#$=e,e}async childValueChanged(t,e){await this.ready,e=await e;const i=this.#f;t&&(ee(e)?i.delete(t):i.set(t,e)),this.#n=await se(this.#f,this.pages);const n=this.activePage;n?await this.#D(n):await this.#D()}}he(Ci);const Si=Ci}},e={};function i(n){var s=e[n];if(void 0!==s)return s.exports;var a=e[n]={exports:{}};return t[n](a,a.exports,i),a.exports}i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var n={};(()=>{"use strict";i.r(n),i.d(n,{BaseField:()=>T.BaseField,BaseSubmitAction:()=>T.BaseSubmitAction,Container:()=>T.Container,Field:()=>T.Field,Form:()=>T.Form,List:()=>T.List,Page:()=>T.Page,SubmitActionResult:()=>T.SubmitActionResult});const t=function(){const t=Array.from(arguments),e=t.shift();for(;t.length>0;)t.shift()(e)},e={global:"undefined"!=typeof window?window:void 0!==i.g?i.g:"undefined"!=typeof self?self:{},globalVar:function(t,i){return 2===arguments.length&&void 0===e.global[t]&&(e.global[t]=i),e.global[t]}},s=e,a=s.globalVar("___DOM_API_EXTENSION_MAP___",{}),r=function(t,e){return function(i){let n=a[i.name];n||(n=a[i.name]={}),n[t]?console.warn('duplicated load of extension "'+t+'"!'):(n[t]=!0,e(i.prototype))}},o=r("EventSupport",(t=>{const e=/(\s+)|(\s*,\s*)/,i=t=>(t.__wrapperhandlemap__||(t.__wrapperhandlemap__=new Map),t.__wrapperhandlemap__),n=(t,n,s)=>{const{wrapper:a,option:r,events:o,handle:l}=n,c=r.capture;if(s){s="string"==typeof s?s.split(e):s;for(let e of s){const n=o.indexOf(e);n>=0&&(t.removeEventListener(e,a,c),o.splice(n,1)),0==o.length&&i(t).delete(l)}}else{for(let e of o)t.removeEventListener(e,a,c);i(t).delete(l)}};t.on=function(){if(arguments.length<2)throw new Error("Too less arguments!");const t=Array.from(arguments);let s="string"==typeof t[0]?t.shift().split(e):t.shift();const a="string"==typeof t[0]?t.shift():null,r=t.shift(),o=void 0===t[0]?{capture:!1,once:!1,passive:!1}:"boolean"==typeof t[0]?{capture:t.shift(),once:!1,passive:!1}:t.shift(),l=function(t){if(a){const e=t.target;if("function"==typeof e.is&&!e.is(a))return}const e=r.apply(null,arguments);return o.once&&n(this,l),e};i(this).set(r,{handle:r,wrapper:l,events:s,option:o});for(let t of s)this.addEventListener(t,l,o);return this},t.removeOn=function(t,e,s){const a=i(this).get(t);return a?n(this,a,e):this.removeEventListener(t,e,s),this},t.trigger=function(){const t=Array.from(arguments),e="number"==typeof t[0]?t.shift():-1;if(e>=0){const i=t[0],n=(this.___EVENTTRIGGERTIMEOUTS___||(this.___EVENTTRIGGERTIMEOUTS___={}),this.___EVENTTRIGGERTIMEOUTS___),s=n[i];s&&clearTimeout(s),n[i]=setTimeout((()=>{delete n[i],this.trigger.apply(this,t)}),e)}else{const e=t.shift(),i=t[0]instanceof Event?t.shift():null,n=t.length>=1?1==t.length?t.shift():t:i,s=n?new CustomEvent(e,{bubbles:!0,cancelable:!0,composed:!0,detail:n}):new Event(e,{bubbles:!0,cancelable:!0,composed:!0});i&&(s.delegatedEvent=i),this.dispatchEvent(s)}return this}}));t(EventTarget,o);const l=r("DataSupport",(t=>{t.data=function(){const t={};if(void 0!==this.dataset)for(name in this.dataset)t[name]=this.dataset[name];return this.data=function(){return 0==arguments.length?t:1==arguments.length?t[arguments[0]]:(void 0===arguments[1]||null==arguments[1]?delete t[arguments[0]]:t[arguments[0]]=arguments[1],this)}.bind(this),this.data.apply(null,arguments)}})),c=r("ManipulationSupport",(t=>{t.empty=function(){let t=this.childNodes;for(;0!=t.length;)t[0].remove(!0);return this},t.content=function(){return this.childNodes},t.html=function(){return 0==arguments.length?this.innerHTML:1==arguments.length&&"boolean"==typeof arguments[0]?arguments[0]?this.outerHTML:this.innerHTML:(Array.from(arguments).forEach((t=>{this.empty(),("string"==typeof t||t instanceof Node||t instanceof NodeList||t instanceof HTMLCollection)&&this.append(t)})),this)};const e=function(){const e=t.appendChild.bind(this);for(let t=0;t<arguments.length;t++){let i=arguments[t];i instanceof Node?this.appendChild(i):"string"==typeof i?create(i).forEach(e):"function"==typeof i.forEach&&i.forEach(e)}};t.append=e;const i=function(t,e){this.insertBefore(e,t)};t.prepend=function(){if(0==this.childNodes.length)e.apply(this,arguments);else{const t=this.childNodes.first(),e=i.bind(this,t);for(let t=0;t<arguments.length;t++){const i=arguments[t];i instanceof Node?e(i):("string"==typeof i||"function"==typeof i.forEach)&&i.forEach(e)}}},t.replace=function(){if(arguments.length<1)throw new Error("Insufficient arguments! One or two nodes required!");const t=1==arguments.length?this.parentNode:this,e=1==arguments.length?this:arguments[0],i=1==arguments.length?arguments[0]:arguments[1];i instanceof Array||i instanceof NodeList||i instanceof HTMLCollection?(i.forEach((i=>t.insertBefore(i,e))),e.remove()):t.replaceChild(i,e)},t.after=function(){if(null==this.parentNode)throw new Error("Can't insert nodes after this node! Parent node not available!");const e=this.parentNode,i=this.nextSibling;i?t.before.apply(i,arguments):t.append.apply(e,arguments)},t.before=function(){if(null==this.parentNode)throw new Error("Can't insert nodes after this node! Parent node not available!");const t=this.parentNode,e=e=>{t.insertBefore(e,this)};for(let t=0;t<arguments.length;t++){const i=arguments[t];i instanceof Node?e(i):("string"==typeof i||"function"==typeof i.forEach)&&i.forEach(e)}}}));t(Node,l,c);const u=/:parent(\(\"([^\)]*)\"\))?/i,h=function(t,e){let i=u.exec(e);if(!i)return t.querySelectorAll(e);{let n=t;if(i.index>0&&(n=t.querySelectorAll(e.substr(0,i.index)),0==n.length))return;if(n=n.parent(i[2]),n){let t=e.substr(i.index+i[0].length).trim();return t.length>0&&(n=n.find(t)),n}}},d=r("QuerySupport",(t=>{t.find=function(){let t=[],e=Array.from(arguments),i=e.shift();for(;i;){if("string"==typeof i){let e=h(this,i);e&&t.push(e)}i=e.shift()}return NodeList.from.apply(null,t)},t.is=function(){if(this instanceof Document||this instanceof DocumentFragment)return!1;if(1==arguments.length){if("string"==typeof arguments[0])return this.matches(arguments[0]);if("number"==typeof arguments[0].length){let t=arguments[0];for(let e=0;e<t.length;e++)if(this.matches(t[e]))return!0}}else if(arguments.length>1)return this.is(Array.from(arguments));return!1},t.parent=function(t,e){if(!this.parentNode)return null;e="boolean"==typeof t?t:e,t="string"==typeof t?t:null;let i=this.parentNode;if(i instanceof ShadowRoot&&e&&(i=i.host),t){try{for(;i&&!i.is(t);)i=i.parent(t,e)}catch(t){console.error("this:",this,"parent:",i,"error:",t)}return i}return i},t.parents=function(){let e=new Array,i=t.parent.apply(this,arguments);for(;i;)e.push(i),i=t.parent.apply(i,arguments);return NodeList.from(e)},t.selector=function(){if(!(this instanceof Document||this instanceof DocumentFragment)){if(this.id)return"#"+this.id;{let t=this.tagName.toLowerCase(),e=this.parent();if(e){let i=e.find(":scope>"+t);if(i instanceof NodeList){let e=i.indexOf(this);e>0&&(t+=":nth-child("+(e+1)+")")}let n=e.selector();return n?n+">"+t:t}return t}}},t.closest=function(t){return this.closests(t).first()},t.closests=function(t){const e=this.find(t);if(0!=e.length)return e;const i=this.parentElement;return i?i.closests(t):NodeList.from([])},t.nested=function(t){if(this.is(t))return NodeList.from(this);let e=this.find(t);return e&&e.length>0?e:NodeList.from(this.parent(t))}})),p=d,f=r("AttributeSupport",(t=>{t.attr=function(){return 0==arguments.length?this.hasAttributes()?(()=>{const t={};return this.getAttributeNames().forEach((e=>{t[e]=this.getAttribute(e)})),t})():void 0:1==arguments.length?this.getAttribute(arguments[0]):(void 0===arguments[1]||null==arguments[1]?this.removeAttribute(arguments[0]):this.setAttribute(arguments[0],arguments[1]),this)}}));t(Element,p,f,c);const g=r("ReadyEventSupport",(t=>{t.ready=function(t,e){return this.on("ready",t,e),"complete"==document.readyState&&this.trigger("ready"),this}}));t(Document,p,g),document.addEventListener("DOMContentLoaded",(()=>document.trigger("ready"))),t(DocumentFragment,p,c);const y=r("HtmlClassSupport",(t=>{t.addClass=function(){return 1==arguments.length?arguments[0].split(/\s+/).forEach((t=>this.classList.add(t))):arguments.length>1&&Array.prototype.forEach.call(arguments,(t=>this.classList.add(t))),this},t.removeClass=function(){return 1==arguments.length?arguments[0].split(/\s+/).forEach((t=>this.classList.remove(t))):arguments.length>1&&Array.prototype.forEach.call(arguments,(t=>this.classList.remove(t))),this},t.toggleClass=function(){return 1==arguments.length?arguments[0].split(/\s+/).forEach((t=>this.classList.toggle(t))):arguments.length>1&&Array.prototype.forEach.call(arguments,(t=>this.classList.toggle(t))),this}})),m="none",v=t=>t.style.display===m,b=t=>{let e=v(t)?"":t.style.display;return t.show=function(){return this.style.display=e,this}.bind(t),t.hide=function(){return this.style.display=m,this}.bind(t),t},w=r("ShowHideSupport",(t=>{t.show=function(){return b(this).show.apply(null,arguments)},t.hide=function(){return b(this).hide.apply(null,arguments)},t.toggleShow=function(){return v(this)?this.show():this.hide()}}));t(HTMLElement,y,w);const x=[{selector:"select",get:function(){const t=[];return this.find("option").forEach((e=>{e.selected&&t.push(e.value)})),t},set:function(){let t=[];const e=Array.from(arguments);let i=e.shift();for(;i;)Array.isArray(i)?t=t.concat(i):t.push(i),i=e.shift();this.value=t,this.find("option").forEach((e=>e.selected=t.indexOf(e.value)>=0)),this.trigger("changed")}},{selector:'input[type="checkbox"], input[type="radio"]',get:function(){return"on"==this.value||"off"==this.value?this.checked:this.checked?this.value:void 0},set:function(t){"boolean"==typeof t?this.checked=t:"string"==typeof t?this.checked=this.value==t:Array.isArray(t)&&(this.checked=t.indexOf(this.value)>=0),this.trigger("changed")}}],A={get:function(){return this.value},set:function(t){this.value=t,this.trigger("input")}},E=r("ValueSupport",(t=>{t.val=function(){let t=function(t){for(let e=0;e<x.length;e++)if(t.is(x[e].selector))return x[e];return A}(this);return 0==arguments.length?t.get.apply(this,arguments):(t.set.apply(this,arguments),this)}}));t(HTMLInputElement,E),t(HTMLTextAreaElement,r("ValueSupport",(t=>{t.val=function(){return 0==arguments.length?this.value:(this.value=arguments[0],this)}}))),t(HTMLSelectElement,E);const N=function(){const t=Array.from(arguments),e=t.shift(),i=t.shift();t.forEach((t=>{Object.getOwnPropertyNames(t).forEach((n=>{const s=Object.getOwnPropertyDescriptor(t,n);void 0===i[n]&&"function"==typeof s.value&&(i[n]=function(){return e.call(this,n,arguments)})}))}))},P=r("ListSupport",(t=>{t.indexOf=function(){for(let t=0;t<this.length;t++)if(this[t]==arguments[0])return t;return-1},t.forEach=function(){return Array.prototype.forEach.apply(Array.from(this),arguments)},t.map=function(){return Array.prototype.map.apply(Array.from(this),arguments)},t.filter=function(){return Array.prototype.filter.apply(Array.from(this),arguments)},t.first=function(){if(this.length>0)return this[0]},t.last=function(){if(this.length>0)return this[this.length-1]}}));t(NodeList,P),NodeList.prototype.applyTo=function(){const t=Array.from(arguments),e=t.shift(),i="function"==typeof e,n=[];for(let s=0;s<this.length;s++){const a=this[s];let r;i?r=e.apply([a].concat(t)):"function"==typeof a[e]&&(r=a[e].apply(a,t)),r&&n.push(r)}return n},NodeList.prototype.val=function(){if(0==arguments.length){if(this.length>0){const t=new Map;return this.forEach((e=>{"function"==typeof e.val&&e.val()&&t.set(e.name||e.id||e.selector(),e.val())})),t}}else NodeList.prototype.applyTo.apply(this,["val"].concat(Array.from(arguments)))},NodeList.from=function(){const t=Array.from(arguments),e={};let i=0;for(;t.length>0;){const n=t.shift();if(void 0!==n&&null!=n)if(n instanceof Node)e[i++]={value:n,enumerable:!0};else if(n instanceof NodeList||n instanceof HTMLCollection||n instanceof Array)for(let t=0;t<n.length;t++)n[t]&&n[t]instanceof Node&&(e[i++]={value:n[t],enumerable:!0})}return e.length={value:i},Object.create(NodeList.prototype,e)},N((function(t,e){let i=[];return this.forEach((n=>{if(n&&"function"==typeof n[t]){const s=n[t].apply(n,e);s&&(s instanceof NodeList?i=i.concat(Array.from(s)):i.push(s))}})),0===i.length?void 0:i[0]instanceof Node||i[0]instanceof NodeList?NodeList.from(i):i}),NodeList.prototype,Node.prototype,HTMLElement.prototype,HTMLInputElement.prototype,Element.prototype,EventTarget.prototype),t(HTMLCollection,P),HTMLCollection.prototype.applyTo=function(){const t=Array.from(arguments),e=t.shift(),i="function"==typeof e,n=[];for(let s=0;s<this.length;s++){const a=this[s];let r;i?r=e.apply([a].concat(t)):"function"==typeof a[e]&&(r=a[e].apply(a,t)),r&&n.push(r)}return n},HTMLCollection.prototype.val=function(){if(0==arguments.length){if(this.length>0){const t=new Map;return this.forEach((e=>{"function"==typeof e.val&&e.val()&&t.set(e.name||e.id||e.selector(),e.val())})),t}}else HTMLCollection.prototype.applyTo.apply(this,["val"].concat(Array.from(arguments)))},HTMLCollection.from=function(){const t=Array.from(arguments),e={};let i=0;for(;t.length>0;){const n=t.shift();if(void 0!==n&&null!=n)if(n instanceof HTMLElement)e[i++]={value:n,enumerable:!0};else if(n instanceof HTMLCollection||n instanceof NodeList||n instanceof Array)for(let t=0;t<n.length;t++)n[t]&&n[t]instanceof HTMLElement&&(e[i++]={value:n[t],enumerable:!0})}return e.length={value:i},Object.create(HTMLCollection.prototype,e)},N((function(t,e){let i=[];return this.forEach((n=>{if(n&&"function"==typeof n[t]){let s=n[t].apply(n,e);s&&(s instanceof HTMLCollection?i=i.concat(Array.from(s)):i.push(s))}})),0===i.length?void 0:i[0]instanceof HTMLElement||i[0]instanceof HTMLCollection?HTMLCollection.from.apply(null,i):i}),HTMLCollection.prototype,Node.prototype,HTMLElement.prototype,HTMLInputElement.prototype,Element.prototype,EventTarget.prototype),s.global.defaultjs=s.global.defaultjs||{},s.global.defaultjs.extdom=s.global.defaultjs.extdom||{VERSION:"2.6.31",utils:{Utils:s}},s.global.find=function(){return document.find.apply(document,arguments)},s.global.ready=function(){return document.ready.apply(document,arguments)},s.global.create=function(t,e){if("string"!=typeof arguments[0])throw new Error("The first argument must be a string!");const i=document.createElement("template");return i.innerHTML=t,e?i:document.importNode(i.content,!0).childNodes},s.global.script=function(t,e){return t instanceof Array?Promise.all(t.map((t=>s.global.script(t,e)))):"string"==typeof t?new Promise(((i,n)=>{const s=document.createElement("script");s.async=!0,s.onload=function(){i()},s.onerror=function(){throw new Error("load error!")},e?e.append(s):document.body.append(s),s.src=t})):Promise.reject("First parameter must be an array of strings or a string!")};var V=i(429),T=i(562);V.default.defaultjs=V.default.defaultjs||{},V.default.defaultjs.html=V.default.defaultjs.html||{},V.default.defaultjs.html.form=V.default.defaultjs.html.form||{VERSION:"2.6.31",Form:T.Form,Page:T.Page,BaseField:T.BaseField,Field:T.Field,Container:T.Container,List:T.List,BaseSubmitAction:T.BaseSubmitAction,SubmitActionResult:T.SubmitActionResult}})()})();
//# sourceMappingURL=browser-defaultjs-html-form.min.js.map