!function(t){var e={};function i(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(n,a,function(e){return t[e]}.bind(null,a));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=15)}([function(t,e,i){"use strict";i.r(e),i.d(e,"HTML_TAG_PREFIX",(function(){return n})),i.d(e,"TRIGGER_TIMEOUT",(function(){return a})),i.d(e,"EVENTHANDLE_TIMEOUT",(function(){return r})),i.d(e,"EVENTHANDLE_INPUT_TIMEOUT",(function(){return s})),i.d(e,"NODENAMES",(function(){return u})),i.d(e,"FORMSTATES",(function(){return o})),i.d(e,"REQUIREDSTATES",(function(){return l})),i.d(e,"EVENT_PREFIX",(function(){return c})),i.d(e,"EVENTS",(function(){return d})),i.d(e,"SPECIALVARS",(function(){return h})),i.d(e,"ATTRIBUTE_NAME",(function(){return f})),i.d(e,"ATTRIBUTE_ENDPOINT",(function(){return p})),i.d(e,"ATTRIBUTE_METHOD",(function(){return T})),i.d(e,"ATTRIBUTE_STATE",(function(){return E})),i.d(e,"ATTRIBUTE_STEP",(function(){return g})),i.d(e,"ATTRIBUTE_USE_SUMMARY_PAGE",(function(){return v})),i.d(e,"ATTRIBUTE_INPUT_MODE_AFTER_SUBMIT",(function(){return A})),i.d(e,"ATTRIBUTE_REQUIRED",(function(){return m})),i.d(e,"ATTRIBUTE_REQUIRED_ON_ACTIVE_ONLY",(function(){return _})),i.d(e,"ATTRIBUTE_CONDITION",(function(){return N})),i.d(e,"ATTRIBUTE_ACTIVE",(function(){return y})),i.d(e,"ATTRIBUTE_DISABLED",(function(){return b})),i.d(e,"ATTRIBUTE_EDITABLE",(function(){return S})),i.d(e,"ATTRIBUTE_EDITABLE_CONDITION",(function(){return I})),i.d(e,"ATTRIBUTE_READONLY",(function(){return O})),i.d(e,"ATTRIBUTE_NOVALUE",(function(){return R})),i.d(e,"ATTRIBUTE_VALID",(function(){return V})),i.d(e,"ATTRIBUTE_INVALID",(function(){return x})),i.d(e,"ATTRIBUTE_CONDITION_VALID",(function(){return D})),i.d(e,"ATTRIBUTE_CONDITION_INVALID",(function(){return w})),i.d(e,"ATTRIBUTE_MAX",(function(){return U})),i.d(e,"ATTRIBUTE_PROGRESS",(function(){return M}));const n="d-",a=10,r=10,s=50*r,u={Form:n+"form",Control:n+"control",BackButton:n+"control-back",NextButton:n+"control-next",SummaryButton:n+"control-summary",SubmitButton:n+"control-submit",CancelButton:n+"control-cancel",Page:n+"page",Field:n+"field",WrapperField:n+"wrapper-field",List:n+"list",ListRows:n+"rows",ListRow:n+"row",ButtonAddRow:n+"add-row",ButtonDeleteRow:n+"delete-row",Container:n+"container",Validation:n+"validation",Message:n+"message",ProgressBar:n+"progress-bar",Step:n+"step"},o={init:"init",input:"input",summary:"summary",finished:"finished"},l={always:"always",onActive:"on-active"},c=n+"form-",d={initialize:c+"initialize",input:c+"field-input",valueChanged:c+"field-value-changed",executeValidate:c+"execute-validate",activeStateChanged:c+"active-state-changed",conditionStateChanged:c+"condition-state-changed",validStateChanged:c+"valid-state-changed",siteChanged:c+"site-changed",formStateChanged:c+"state-changed",allPublishValue:c+"all-publish-value",submit:c+"submit",progressbarChanged:c+"progress-bar-changed",added:c+"added",change:c+"change",changeAttributeEventBuilder:t=>c+"change-attribute-"+t,changeActive:c+"change-active",changeValue:c+"change-value",changeCondition:c+"change-condition",changeValidation:c+"change-validation",listRowAdd:c+"list-row-add",listRowDelete:c+"list-row-delete",editableStateChanged:c+"editable-state-changed"},h={CURRENTVALUE:"$value",CURRENTLISTROW:"$item"},f="name",p="endpoint",T="method",E="state",g="step",v="use-summary-page",A="input-mode-after-submit",m="required",_="required-on-active-only",N="condition",y="active",b="disabled",S="editable",I="editable-condition",O="readonly",R="no-value",V="valid",x="invalid",D="condition-valid",w="condition-invalid",U="max",M="progress"},function(t,e,i){"use strict";i.r(e),e.default=t=>{window.customElements.get(t.NODENAME)||window.customElements.define(t.NODENAME,t)}},function(t,e,i){"use strict";i.r(e),i.d(e,"toEvents",(function(){return a})),i.d(e,"makeEventCopy",(function(){return r})),i.d(e,"toTimeoutHandle",(function(){return s}));var n=i(0);const a=function(){return Array.from(arguments).join(" ")},r=t=>({type:t.type,target:t.target,detail:t.detail,currentTarget:t.currentTarget,explicitOriginalTarget:t.explicitOriginalTarget,originalTarget:t.originalTarget,srcElement:t.srcElement,timeStamp:t.timeStamp}),s=(t,e,i,a)=>{let s=null;const u="function"==typeof e?e:()=>e,o="function"==typeof i?i:()=>i;return e=>{u(e)&&e.preventDefault(),o(e)&&e.stopPropagation();const i=r(e);s&&clearTimeout(s),s=setTimeout(()=>{s=null,t(i)},a||n.EVENTHANDLE_TIMEOUT)}}},function(t,e,i){"use strict";i.r(e),i.d(e,"append",(function(){return a})),i.d(e,"isPojo",(function(){return r})),i.d(e,"merge",(function(){return s})),i.d(e,"filter",(function(){return u})),i.d(e,"defValue",(function(){return o})),i.d(e,"defGet",(function(){return l})),i.d(e,"defGetSet",(function(){return c}));class n{constructor(t,e){this.key=t,this.context=e}get keyDefined(){return this.key in this.context}get hasValue(){return!!this.context[this.key]}get value(){return this.context[this.key]}set value(t){this.context[this.key]=t}set append(t){if(this.hasValue){const e=this.value;e instanceof Array?e.push(t):this.value=[this.value,t]}else this.value=t}remove(){delete this.context[this.key]}static load(t,e,i=!0){let a=t;const r=e.split(".");let s=r.shift().trim();for(;r.length>0;){if(!a[s]){if(!i)return null;a[s]={}}a=a[s],s=r.shift().trim()}return new n(s,a)}}const a=function(t,e,i){if(void 0!==e){n.load(i,t,!0).append=e}return i},r=function(t){return void 0!==t&&null!=t&&"Object"===t.constructor.name},s=function(t){for(let e=1;e<arguments.length;e++){const i=arguments[e];Object.getOwnPropertyNames(i).forEach(e=>{r(t[e])?s(t[e],i[e]):t[e]=i[e]})}return t},u=function(){const[t,e,{deep:i=!1,recursive:n=!0,parents:a=[]}={}]=arguments,r={};for(let s in t){const o=t[s],l=e(s,o,t);if(!l||i&&null!=o){if(l&&i){"object"!==typeof o||o instanceof Array||o instanceof Map||o instanceof Set||o instanceof RegExp||a.includes[o]||o==t?r[s]=o:r[s]=u(o,e,{deep:i,recursive:n,parents:a.concat(t)})}}else r[s]=o}return r},o=(t,e,i)=>{Object.defineProperty(t,e,{value:i,writable:!1,configurable:!1,enumerable:!1})},l=(t,e,i)=>{Object.defineProperty(t,e,{get:i,configurable:!1,enumerable:!1})},c=(t,e,i,n)=>{Object.defineProperty(t,e,{get:i,set:n,configurable:!1,enumerable:!1})};e.default={isPojo:r,append:a,merge:s,filter:u,buildPropertyFilter:function({names:t,allowed:e}){return(i,n,a)=>t.includes(i)===e},defValue:o,defGet:l,defGetSet:c}},function(t,e,i){"use strict";i.r(e),i.d(e,"createUID",(function(){return l}));var n=i(3);const a=()=>{let t=null,e=null;const i=new Promise((i,n)=>{t=i,e=n});let a=!1,r=!1,s=void 0;return Object(n.defValue)(i,"resolve",i=>{s=i,a=!0,s instanceof Error?(r=!0,e(s)):t(s)}),Object(n.defGet)(i,"value",()=>s),Object(n.defGet)(i,"error",()=>r),Object(n.defGet)(i,"resolved",()=>a),i};const r=()=>{const t=new Uint32Array(4);window.crypto.getRandomValues(t);let e=-1;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,i=>{e++;const n=t[e>>3]>>e%8*4&15;return("x"==i?n:3&n|8).toString(16)})};const s=(t,e)=>{let i="unsupported";if("string"==typeof e)i=e;else if(e instanceof HTMLElement)i=e.nodeName;else{if("string"!=typeof e.NODENAME)throw new Error(typeof e+" is not supported as pram node!");i=e.NODENAME}return`${i.toLowerCase()}- ${t}`},u=(t,e)=>s("attribute--"+t,e);const o=new class{constructor(){Object(n.defValue)(this,"weakmap",new WeakMap)}data(t){let e=this.weakmap.get(t);return e||(e={},this.weakmap.set(t,e)),e}value(t,e,i){if(2==arguments.length)return this.data(t)[e];this.data(t)[e]=i}},l=(t,e)=>{let i=0,n=null;for(;i<100;){if(n=`${t}${r()}${e}`,!document.getElementById(n))return n;i++}return console.error(new Error("To many retries to create an unique id - created id is not unique!")),n};class c extends HTMLElement{constructor({shadowRoot:t=!1,content:e=null,createUID:i=!1,uidPrefix:r="id-",uidSuffix:s=""}={}){super(),Object(n.defValue)(this,"ready",a()),i&&this.attr("id",i(r,s)),t&&this.attachShadow({mode:open}),e&&this.root.append("function"==typeof e?e(this):e)}get root(){return this.shadowRoot||this}async init(){}connectedCallback(){this.ownerDocument==document&&(t=>{const e=o.data(t);e.initialize&&clearTimeout(e.initialize),e.initialize=setTimeout(async()=>{delete e.initialize,await t.init(),t.ready.resolve(),t.trigger(s("initialzed",t))},100)})(this)}adoptedCallback(){this.connectedCallback()}attributeChangedCallback(t,e,i){e!=i&&this.isConnected&&(this.trigger(100,u(t,this)),this.trigger(100,s("change",this)))}}e.default=c},function(t,e,i){"use strict";i.r(e),i.d(e,"findParentField",(function(){return d}));var n=i(0),a=(i(2),i(7)),r=i(13),s=i(9),u=(i(16),i(11)),o=i(14);var l=class{constructor(t){this.inital=!0,this.base=t,this.customChecks=[],this.validations=Object(u.findValidations)(t)||[],this.condition=t.attr(n.ATTRIBUTE_CONDITION),this.editableCondition=t.attr(n.ATTRIBUTE_EDITABLE_CONDITION)}addCustomCheck(t){this.customChecks.push(t)}get form(){return this.base.form}async validate(){const{base:t,validations:e,customChecks:i,condition:r,editableCondition:u}=this,{hasValue:l,required:c,requiredOnlyOnActive:d}=t,h=(i.length>0||e.length,await Object(o.evaluationData)(t));this.inital;this.inital=!1;const f=!r||await s.default.resolve(r,h,!1);Object(a.updateConditionState)(t,f,this.inital);let p=!c||l;if(f){if(p)for(let e of i){await e({data:h,base:t})||(p=!1)}for(let t of e)if(p&&l){const e=await s.default.resolve(t.condition,h,!0);t.active=!e,e||(p=!1)}else t.active=!1;(async({data:t,valid:e,base:i,condition:a})=>{const{form:r}=i;if(r.state==n.FORMSTATES.input)if(e){if(a){const e=await s.default.resolve(a,t,!1);return i.editable=e,e}}else i.readonly=!1;return e})({data:h,valid:p,base:t,condition:u})||(p=!0),Object(a.updateValidState)(t,p,this.inital)}return p}};const c=[n.ATTRIBUTE_NAME,n.ATTRIBUTE_REQUIRED,n.ATTRIBUTE_NOVALUE],d=t=>{let e=t.parentNode;for(;e;){if(e instanceof h)return e;e=e.parentNode}return null};class h extends r.default{static get observedAttributes(){return c.concat(r.default.observedAttributes)}constructor(t=null){super(),this.__value__=t,this.__valueChanged__=!0,this.on(n.EVENTS.conditionStateChanged,t=>{t.target==this&&this.conditionUpdated()})}async init(){await super.init();this.ready.resolved||(this.parentField=d(this),this.validator=new l(this),this.form.on(n.EVENTS.executeValidate,async t=>{if(t.detail.indexOf(this)<0){this.valid!=await this.validate()&&this.publishValue()}}),this.form.on(n.EVENTS.allPublishValue,()=>{this.publishValue()})),this.validate()}conditionUpdated(){this.active=this.condition}get name(){return this.getAttribute(n.ATTRIBUTE_NAME)}get required(){return this.hasAttribute(n.ATTRIBUTE_REQUIRED)}get hasValue(){const t=this.__value__;return null!=t&&void 0!==t}async value(){if(0==arguments.length)return this.__value__;let t=arguments[0];await this.ready,this.__value__!=t&&await this.acceptValue(t)&&(t=await this.normalizeValue(t),this.__value__!=t&&(this.__value__=t,await this.updatedValue(t),await this.validate(),this.publishValue()))}async validate(){var t;if(t=this.hasValue,this.attr(n.ATTRIBUTE_NOVALUE,t?null:""),!this.validator)return!1;return await this.validator.validate()}async publishValue(t=[]){t.push(this),this.parentField?await this.parentField.childValueChanged(this,t):this.trigger(n.EVENTS.valueChanged,t)}async acceptValue(t){return!0}async normalizeValue(t){return t}async updatedValue(){}async childValueChanged(t,e){}}e.default=h},function(t,e,i){"use strict";i.r(e);var n=i(0),a=i(4);const r=[n.ATTRIBUTE_ACTIVE,n.ATTRIBUTE_DISABLED];class s extends a.default{static get observedAttributes(){return r}static init(t){}constructor(){super(),this.active=!1,this.disabled=!1,this.on("click",t=>{t.preventDefault(),t.stopPropagation(),this.active&&!this.disabled&&this.execute()})}async init(){await super.init(),this.form=this.parent(n.NODENAMES.Form)}get active(){return this.hasAttribute(n.ATTRIBUTE_ACTIVE)}set active(t){t?this.attr(n.ATTRIBUTE_ACTIVE,""):this.attr(n.ATTRIBUTE_ACTIVE,null)}get disabled(){return this.hasAttribute(n.ATTRIBUTE_DISABLED)}set disabled(t){t?this.attr(n.ATTRIBUTE_DISABLED,""):this.attr(n.ATTRIBUTE_DISABLED,null)}execute(){console.log("execute")}}e.default=s},function(t,e,i){"use strict";i.r(e),i.d(e,"updateValidState",(function(){return a})),i.d(e,"updateConditionState",(function(){return r})),i.d(e,"updateActiveState",(function(){return s})),i.d(e,"updateEditableState",(function(){return u}));var n=i(0);const a=(t,e,i=!1)=>{const a=t.valid;void 0===e||null==e?(t.attr(n.ATTRIBUTE_INVALID,null),t.attr(n.ATTRIBUTE_VALID,null)):e?(t.attr(n.ATTRIBUTE_INVALID,null),t.attr(n.ATTRIBUTE_VALID,"")):(t.attr(n.ATTRIBUTE_INVALID,""),t.attr(n.ATTRIBUTE_VALID,null)),(a!=e||i)&&t.trigger(n.EVENTS.validStateChanged)},r=(t,e,i=!1)=>{const a=t.condition;e?(t.attr(n.ATTRIBUTE_CONDITION_INVALID,null),t.attr(n.ATTRIBUTE_CONDITION_VALID,"")):(t.attr(n.ATTRIBUTE_CONDITION_VALID,null),t.attr(n.ATTRIBUTE_CONDITION_INVALID,"")),(a!=e||i)&&t.trigger(n.EVENTS.conditionStateChanged)},s=(t,e,i=!1)=>{const a=t.active;e?t.attr(n.ATTRIBUTE_ACTIVE,""):t.attr(n.ATTRIBUTE_ACTIVE,null),(a!=e||i)&&t.trigger(n.EVENTS.activeStateChanged)},u=(t,e,i=!1)=>{const a=t.editable;e?(t.attr(n.ATTRIBUTE_EDITABLE,""),t.attr(n.ATTRIBUTE_READONLY,null)):(t.attr(n.ATTRIBUTE_EDITABLE,null),t.attr(n.ATTRIBUTE_READONLY,"")),(a!=e||i)&&t.trigger(n.EVENTS.editableStateChanged)}},function(t,e,i){"use strict";i.r(e);var n=i(3),a=i(0),r=i(11),s=(i(2),i(5)),u=i(1);const o=[],l=/\./g,c=function(t,e,i){if(null==t||void 0===t)return null;const n=arguments.length>2,a=e.split(l);for(;a.length>1;){const e=a.shift();let i=t[e];const r="undefiend"!=typeof i&&null!=i;if(!r&&!n)return null;!r&&n&&(i=t[e]={}),t=i}if(!n)return t[a[0]]?t[a[0]]:null;t[a[0]]=i};class d extends s.default{static get observedAttributes(){return o.concat(s.default.observedAttributes)}static get NODENAME(){return a.NODENAMES.Container}constructor(t=null){super(t||{}),this.fields=[],this.on(a.EVENTS.valueChanged,t=>{const e=t.target;if(e!=this){t.preventDefault(),t.stopPropagation();const i=t.detail;this.childValueChanged(e,i)}})}async init(){await super.init(),this.fields=Object(r.findFields)(this),this.on(a.EVENTS.initialize,t=>{if(t.target!=this){const e=t.target;e instanceof s.default&&(this.fields.indexOf(e)<0&&this.fields.push(e),t.preventDefault(),t.stopPropagation())}}),this.validator.addCustomCheck(async({data:t,base:e})=>{const{fields:i}=e;if(i){const t=i.length;for(let e=0;e<t;e++){const t=i[e];if(t.condition&&!t.valid)return!1}}return!0})}readonlyUpdated(){const{readonly:t,fields:e}=this;if(e)for(let i of e)i.readonly=t}async updatedValue(t){this.__value__={};const{fields:e}=this;if(e)for(let i of e)i.name?await i.value(c(t,i.name)):i instanceof d&&await i.value(t)}async childValueChanged(t,e){await this.ready;const i=await t.name,a=await t.value();i?c(this.__value__,i,a):null!=a&&n.default.merge(this.__value__,a),this.validate(),this.publishValue(e)}}Object(u.default)(d),e.default=d},function(t,e,i){"use strict";i.r(e),i.d(e,"default",(function(){return v}));var n=i(23);class a{constructor(t,e){this.key=t,this.context=e}get keyDefined(){return this.key in this.context}get hasValue(){return!!this.context[this.key]}get value(){return this.context[this.key]}set value(t){this.context[this.key]=t}set append(t){if(this.hasValue){const e=this.value;e instanceof Array?e.push(t):this.value=[this.value,t]}else this.value=t}remove(){delete this.context[this.key]}static load(t,e,i=!0){let n=t;const r=e.split(".");let s=r.shift().trim();for(;r.length>0;){if(!n[s]){if(!i)return null;n[s]={}}n=n[s],s=r.shift().trim()}return new a(s,n)}}const r=function(t){return void 0!==t&&null!=t&&"Object"===t.constructor.name},s=function(t){for(let e=1;e<arguments.length;e++){const i=arguments[e];Object.getOwnPropertyNames(i).forEach(e=>{r(t[e])?s(t[e],i[e]):t[e]=i[e]})}return t},u=function(){const[t,e,{deep:i=!1,recursive:n=!0,parents:a=[]}={}]=arguments,r={};for(name in t){const s=t[name],o=e(name,s,t);if(!o||i&&null!=s){if(o&&i){"object"!==typeof s||s instanceof Array||s instanceof Map||s instanceof Set||s instanceof RegExp||a.includes[s]||s==t?r[name]=s:r[name]=u(s,e,{deep:i,recursive:n,parents:a.concat(t)})}}else r[name]=s}return r};var o={isPojo:r,append:function(t,e,i){if(void 0!==e){a.load(i,t,!0).append=e}return i},merge:s,filter:u,buildPropertyFilter:function({names:t,allowed:e}){return(i,n,a)=>t.includes(i)===e}};class l{constructor(t){this.hasValue=1==arguments.length,this.value=t}}class c{constructor(t,e){this.data=t,this.resolver=e,this.cache=new Map}updateData(t){this.data=t,this.cache=new Map}resetCache(){this.cache=new Map}getPropertyDef(t,e=!0){if(this.cache.has(t))return this.cache.get(t);let i=null;if(this.data&&t in this.data)i={data:this.data,resolver:this.resolver,defined:!0};else{if(!e)return null;i=((t,e)=>{for(;t;){const i=t.proxy.handle.getPropertyDef(e,!1);if(i)return i;t=t.parent}return{data:null,resolver:null,defined:!1}})(this.resolver.parent,t)}return i.defined&&this.cache.set(t,i),i}hasProperty(t){const{defined:e}=this.getPropertyDef(t);return e}getProperty(t){const{data:e}=this.getPropertyDef(t);return e?e[t]:void 0}setProperty(t,e){const{data:i,defined:n}=this.getPropertyDef(t);n?i[t]=e:(this.data||(this.data={}),this.data[t]=e,this.cache.set(t,{data:this.data,resolver:this.resolver,defined:!0}))}deleteProperty(t){throw new Error("unsupported function!")}}class d{constructor(t,e){this.handle=new c(t,e),this.data=new Proxy(this.handle,{has:function(t,e){return t.hasProperty(e)},get:function(t,e){return t.getProperty(e)},set:function(t,e,i){return t.setProperty(e,i)},deleteProperty:function(t,e){return t.deleteProperty(e)}})}updateData(t){this.handle.updateData(t)}resetCache(){this.handle.resetCache()}}const h=/(\\?)(\$\{(([a-zA-Z0-9\-_\s]+)::)?([^\{\}]+)\})/,f=new l,p=t=>t instanceof l?t:new l(t),T=async function(t,e,i,n){if(i&&t.name!=i)return t.parent?T(t.parent,e,i,n):null;const a=await async function(t,e){if("string"!=typeof t)return t;const i=new Function("context",`\nreturn (async (context) => {\n\ttry{ \n\t\twith(context){\n\t\t\t return ${t}\n\t\t}\n\t}catch(e){\n\t\tthrow e;\n\t}\n})(context)`);let n=setTimeout(()=>{n=null,console.warn("long running statement:",t,new Error)},1e3),a=void 0;try{a=await i(e)}catch(t){}return n&&clearTimeout(n),a}(e,t.proxy.data);return null!=a?a:n instanceof l&&n.hasValue?n.value:void 0},E=async(t,e,i)=>e[1]?e[2]:T(t,e[5],g(e[4]),i),g=t=>t?0==(t=t.trim()).length?null:t:null;class v{constructor({context:t=n.default,parent:e=null,name:i=null}){this.parent=e instanceof v?e:null,this.name=i,this.context=t,this.proxy=new d(this.context,this)}get chain(){return this.parent?this.parent.chain+"/"+this.name:"/"+this.name}get effectiveChain(){return this.context?this.parent?this.parent.effectiveChain+"/"+this.name:"/"+this.name:this.parent?this.parent.effectiveChain:""}get contextChain(){const t=[];let e=this;for(;e;)e.context&&t.push(e.context),e=e.parent;return t}getData(t,e){if(t){if(!e||e==this.name){const e=a.load(this.context,t,!1);return e?e.value:null}this.parent&&this.parent.getData(t,e)}}updateData(t,e,i){if(t)if(i&&i!=this.name)this.parent&&this.parent.updateData(t,e,i);else{null!=this.context&&void 0!==this.context||(this.context={},this.proxy.updateData(this.context));a.load(this.context,t).value=e,this.proxy.resetCache()}}mergeContext(t,e){e&&e!=this.name?this.parent&&this.parent.mergeContext(t,e):this.context=this.context?o.merge(this.context,t):t}async resolve(t,e){const i=2==arguments.length?p(e):f;try{const e=h.exec(t);return e?await E(this,e,i):await T(this,g(t),null,i)}catch(e){return console.error('error at executing statment"',t,'":',e),i.hasValue?i.value:t}}async resolveText(t,e){let i=t,n=t,a=h.exec(i);const r=2==arguments.length?p(e):f;for(;null!=a;){const t=await E(this,a,r);n=n.split(a[0]).join(),i=i.split(a[0]).join(void 0===t?"undefined":null==t?"null":t),a=h.exec(n)}return i}static async resolve(t,e,i,n){const a=new v({context:e}),r=arguments.length>2?p(i):f;return"number"==typeof n&&n>0?new Promise(e=>{setTimeout(()=>{e(a.resolve(t,r))},n)}):a.resolve(t,r)}static async resolveText(t,e,i,n){const a=new v({context:e}),r=arguments.length>2?p(i):f;return"number"==typeof n&&n>0?new Promise(e=>{setTimeout(()=>{e(a.resolveText(t,r))},n)}):a.resolveText(t,r)}static buildSecure({context:t,propFilter:e,option:i={deep:!0},name:n,parent:a}){return t=o.filter({data:t,propFilter:e,option:i}),new v({context:t,name:n,parent:a})}}},,function(t,e,i){"use strict";i.r(e),i.d(e,"treeFilter",(function(){return r})),i.d(e,"findFields",(function(){return s})),i.d(e,"findValidations",(function(){return u}));var n=i(5),a=i(16);const r=({root:t,filter:e})=>{let i=[];return t.children.forEach(t=>{const{accept:n,stop:a=!1}=e(t);if(n&&i.push(t),!a){const n=r({root:t,filter:e});n instanceof Array?i=i.concat(n):n&&i.push(n)}}),i},s=t=>r({root:t,filter:t=>t instanceof n.default?{accept:!0,stop:!0}:{accept:!1}}),u=t=>r({root:t,filter:e=>{if(t!=e){if(e instanceof n.default)return{accept:!1,stop:!0};if(e instanceof a.default)return{accept:!0,stop:!0}}return{accept:!1}}})},function(t,e,i){"use strict";i.r(e);var n=i(0),a=i(8),r=i(1);const s=[n.ATTRIBUTE_STEP];class u extends a.default{static get observedAttributes(){return s.concat(a.default.observedAttributes)}static get NODENAME(){return n.NODENAMES.Page}constructor(){super()}async init(){await super.init()}get step(){return this.attr(n.ATTRIBUTE_STEP)}conditionUpdated(){}}Object(r.default)(u),e.default=u},function(t,e,i){"use strict";i.r(e);var n=i(0),a=i(4),r=i(7);const s=[n.ATTRIBUTE_ACTIVE,n.ATTRIBUTE_READONLY,n.ATTRIBUTE_CONDITION,n.ATTRIBUTE_CONDITION_VALID,n.ATTRIBUTE_CONDITION_INVALID,n.ATTRIBUTE_EDITABLE_CONDITION];class u extends a.default{static get observedAttributes(){return s}constructor(){super()}async init(){await super.init()}get form(){return this.__form__||(this.__form__=this.parent(n.NODENAMES.Form)),this.__form__}get active(){return this.hasAttribute(n.ATTRIBUTE_ACTIVE)}set active(t){this.active!=t&&(Object(r.updateActiveState)(this,t),this.activeUpdated())}activeUpdated(){}get readonly(){return this.hasAttribute(n.ATTRIBUTE_READONLY)}set readonly(t){Object(r.updateEditableState)(this,!t,!this.ready.resolved),this.readonlyUpdated()}readonlyUpdated(){}get editable(){return this.hasAttribute(n.ATTRIBUTE_EDITABLE)}set editable(t){Object(r.updateEditableState)(this,t,!this.ready.resolved),this.editableUpdated()}editableUpdated(){this.readonlyUpdated()}get condition(){return!this.hasAttribute(n.ATTRIBUTE_CONDITION_INVALID)}conditionUpdated(){}get valid(){return this.hasAttribute(n.ATTRIBUTE_VALID)}}e.default=u},function(t,e,i){"use strict";i.r(e),i.d(e,"evaluationData",(function(){return r}));var n=i(3),a=i(0);const r=async t=>{const e={};e[a.SPECIALVARS.CURRENTVALUE]=await t.value();let i=t.parent(a.NODENAMES.ListRow),r=e;for(;i;)r[a.SPECIALVARS.CURRENTLISTROW]=await i.value(),r=r[a.SPECIALVARS.CURRENTLISTROW],i=i.parent(a.NODENAMES.ListRow);return n.default.merge(e,await t.form.data())}},function(t,e,i){"use strict";i.r(e);var n=i(5);i.d(e,"BaseField",(function(){return n.default}));var a=i(21);i.d(e,"Field",(function(){return a.default}));var r=i(8);i.d(e,"Container",(function(){return r.default}));var s=i(22);i.d(e,"List",(function(){return s.default}));var u=i(12);i.d(e,"Page",(function(){return u.default}));var o=i(20);i.d(e,"Form",(function(){return o.default}))},function(t,e,i){"use strict";i.r(e),i.d(e,"ATTRIBUTE_ACTIVE",(function(){return s})),i.d(e,"ATTRIBUTE_CONDITION",(function(){return u}));var n=i(0),a=i(4),r=i(1);const s="active",u="condition",o=[s,u];class l extends a.default{static get observedAttributes(){return o}static get NODENAME(){return n.NODENAMES.Validation}constructor(){super()}async init(){await super.init(),this.active=!1}get active(){return this.hasAttribute(s)}set active(t){t?this.attr(s,""):this.attr(s,void 0)}get condition(){return this.attr(u)}}Object(r.default)(l),e.default=l},function(t,e,i){"use strict";i.r(e),i.d(e,"noValue",(function(){return n})),i.d(e,"emtpyOrNoValueString",(function(){return a}));const n=t=>null==t||void 0===t,a=t=>n(t)||0==t.trim().length;e.default={noValue:n,emtpyOrNoValueString:a}},,function(t,e){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){"use strict";i.r(e);var n=i(4),a=i(9),r=i(3),s=i(0),u=i(1),o=i(2),l=i(13),c=i(14);const d=["active","condition"];class h extends n.default{static get observedAttributes(){return d}static get NODENAME(){return s.NODENAMES.Message}constructor(){super()}async init(){await super.init();this.ready.resolved||(this.reference=(t=>{let e=t.parentNode;for(;e;){if(e instanceof l.default)return e;e=e.parentNode}return null})(this),this.form=this.parent(s.NODENAMES.Form),this.form.on(s.EVENTS.executeValidate,()=>{this.update()})),this.update()}get active(){return this.hasAttribute("active")}set active(t){t?this.attr("active",""):this.attr("active",void 0)}get condition(){return this.attr("condition")}async update(){await this.ready;const t=Object(c.evaluationData)(this.reference);this.active=await a.default.resolve(this.condition,t,!1)}}Object(u.default)(h);var f=i(12),p=i(6);const T=[];class E extends p.default{static get observedAttributes(){return T}static get NODENAME(){return s.NODENAMES.BackButton}constructor(){super()}execute(){this.form.toPrevPage()}}Object(u.default)(E);const g=[];class v extends p.default{static get observedAttributes(){return g}static get NODENAME(){return s.NODENAMES.NextButton}constructor(){super()}execute(){this.form.toNextPage()}}Object(u.default)(v);const A=[];class m extends p.default{static get observedAttributes(){return A}static get NODENAME(){return s.NODENAMES.SummaryButton}constructor(){super()}execute(){this.form.toNextPage()}}Object(u.default)(m);const _=[];class N extends p.default{static get observedAttributes(){return _}static get NODENAME(){return s.NODENAMES.SubmitButton}constructor(){super()}execute(){this.form.submit()}}Object(u.default)(N);const y={active:!0,disabled:!0},b=[];class S extends n.default{static get observedAttributes(){return b}static get NODENAME(){return s.NODENAMES.Control}constructor(){super()}async init(){await super.init(),this.ready.resolved||(this.form=this.parent(s.NODENAMES.Form),this.back=this.find(s.NODENAMES.BackButton).first()||y,this.next=this.find(s.NODENAMES.NextButton).first()||y,this.summary=this.find(s.NODENAMES.SummaryButton).first()||y,this.submit=this.find(s.NODENAMES.SubmitButton).first()||y,this.form.on([s.EVENTS.validStateChanged,s.EVENTS.conditionStateChanged],t=>{t.target instanceof f.default&&this.update()}),this.form.on([s.EVENTS.formStateChanged,s.EVENTS.siteChanged],t=>{this.update()}))}update(){const{back:t,next:e,summary:i,submit:n,form:a}=this,{activePageIndex:r,activePage:u,nextPage:o,pages:l,useSummaryPage:c,state:d}=a;t.active=!0,t.disabled=!0,e.active=!1,e.disabled=!0,i.active=!1,i.disabled=!0,n.active=!1,n.disabled=!0,d==s.FORMSTATES.finished?(t.disabled=!0,n.active=!0):d==s.FORMSTATES.summary?(t.disabled=!1,n.active=!0,n.disabled=!a.valid):d==s.FORMSTATES.input&&(t.disabled=r<=0,o||!u.valid&&r+1<l.length?(e.active=!0,e.disabled=!u.valid):c&&d==s.FORMSTATES.input?(i.active=!0,i.disabled=!u.valid):(n.active=!0,n.disabled=!a.valid))}}Object(u.default)(S);var I=i(7);const O=[s.ATTRIBUTE_NAME,s.ATTRIBUTE_ACTIVE,s.ATTRIBUTE_READONLY];class R extends HTMLElement{static get observedAttributes(){return O}static get NODENAME(){return s.NODENAMES.Step}constructor(){super()}get name(){return this.attr(s.ATTRIBUTE_NAME)}get active(){return this.hasAttribute(s.ATTRIBUTE_ACTIVE)}set active(t){this.active!=t&&Object(I.updateActiveState)(this,t)}get readonly(){return this.hasAttribute(s.ATTRIBUTE_READONLY)}set readonly(t){t?this.attr(s.ATTRIBUTE_READONLY,""):this.attr(s.ATTRIBUTE_READONLY,null)}}Object(u.default)(R);const V=[s.ATTRIBUTE_PROGRESS];class x extends n.default{static get observedAttributes(){return V}static get NODENAME(){return s.NODENAMES.ProgressBar}constructor(){super(),this.on("click",({target:t})=>{if(!this.form)return;if(t==this)return;const e=t.is(s.NODENAMES.Step)?t:t.parent(s.NODENAMES.Step).first();if(!e)return;const i=this.form.state,n=this.form.pages,a=(this.form.activePageIndex,this.form.activePage),r=e.name;if(i==s.FORMSTATES.input||i==s.FORMSTATES.summary){const t=((t,e,i)=>{for(let n of t){if(n.step==e&&n.condition)return n;if(n==i)return}return null})(n,r,a);t&&(this.form.activePage=t)}})}async init(){await super.init();const t=this.ready;this.progress=0,t.resolved||(this.form=this.parent(s.NODENAMES.Form),this.steps=this.find(s.NODENAMES.Step),this.form.on([s.EVENTS.initialize,s.EVENTS.siteChanged,s.EVENTS.formStateChanged],()=>{const t=this.form.state,e=this.form.activePage;if(!e)return;const i=this.form.activePageIndex,n=this.form.pages.length,a=e?e.step:s.FORMSTATES.init,r=Math.floor(100*i/n);for(let e of this.steps){const i=e.name;t==s.FORMSTATES.input?(e.active=i==a,e.readonly=!1):t==s.FORMSTATES.summary?(e.active=i==s.FORMSTATES.summary,e.readonly=!1):(e.active=i==s.FORMSTATES.finished,e.readonly=!0)}this.progress=t==s.FORMSTATES.summary||t==s.FORMSTATES.finished?100:r,this.trigger(s.EVENTS.progressbarChanged)}))}get progress(){return this.attr(s.ATTRIBUTE_PROGRESS)}set progress(t){this.style.setProperty&&this.style.setProperty("--progress",t+"%"),this.attr(s.ATTRIBUTE_PROGRESS,Math.max(0,Math.min(t,100)))}}Object(u.default)(x);const D=[s.ATTRIBUTE_NAME,s.ATTRIBUTE_USE_SUMMARY_PAGE,s.ATTRIBUTE_ENDPOINT,s.ATTRIBUTE_METHOD,s.ATTRIBUTE_STATE,s.ATTRIBUTE_INPUT_MODE_AFTER_SUBMIT],w=(t,e)=>{for(let i of t.pages)i.readonly=e,i.active=e};class U extends n.default{static get observedAttributes(){return D}static get NODENAME(){return s.NODENAMES.Form}constructor(){super(),this.__data__={},this.__state__=null,this.on(s.EVENTS.valueChanged,Object(o.toTimeoutHandle)(async t=>{const e=t.target,i=await e.name,n=await e.value();i?this.__data__[i]=n:null!=n&&r.default.merge(this.__data__,n),this.trigger(s.EVENTS.executeValidate,t.detail)},!0,!0))}async init(){await super.init(),this.state=s.FORMSTATES.init;this.ready.resolved||(this.useSummaryPage=this.hasAttribute(s.ATTRIBUTE_USE_SUMMARY_PAGE),this.activePageIndex=-1,this.useSummaryPage=this.hasAttribute(s.ATTRIBUTE_USE_SUMMARY_PAGE),this.pages=this.find(s.NODENAMES.Page)),this.activePageIndex=-1,this.pages.length>0&&this.toNextPage()}get state(){return this.__state__}set state(t){const e=this.state;e==s.FORMSTATES.input&&t!=s.FORMSTATES.input?w(this,!0):e!=s.FORMSTATES.input&&t==s.FORMSTATES.input&&(w(this,!1),this.activePage&&(this.activePage.active=!0)),this.__state__=t,e!=t&&this.trigger(s.EVENTS.formStateChanged),this.attr(s.ATTRIBUTE_STATE,this.__state__)}get valid(){for(let t of this.pages)if(!t.valid)return!1;return!0}async data(){if(0==arguments.length)return this.__data__;const t=arguments[0];if(await this.ready,this.state==s.FORMSTATES.input){this.__data__={};for(let e of this.pages)e.name?await e.value(t[e.name]):await e.value(t)}}get activePage(){return 0<=this.activePageIndex&&this.activePageIndex<this.pages.length?this.pages[this.activePageIndex]:null}set activePage(t){const e=this.activePage;t!=e&&(e&&(e.active=!1),this.activePageIndex=this.pages.indexOf(t),t.active=!0,this.state!=s.FORMSTATES.input&&(this.state=s.FORMSTATES.input),this.trigger(s.EVENTS.siteChanged))}get prevPage(){for(let t=this.activePageIndex-1;t>=0;t--){const e=this.pages[t];if(e.condition)return e}return null}get nextPage(){if(this.pages){for(let t=this.activePageIndex+1;t<this.pages.length;t++){const e=this.pages[t];if(e.condition)return e}}return null}async toPrevPage(){if(this.state!=s.FORMSTATES.input)this.state=s.FORMSTATES.input;else{const t=await this.prevPage;t&&(this.activePage=t)}}async toNextPage(){const t=await this.nextPage;t?(this.activePage=t,this.state==s.FORMSTATES.init&&(this._state=s.FORMSTATES.input)):this.useSummaryPage?this.summary():this.submit()}async summary(){this.state=s.FORMSTATES.summary}async submit(){this.state=this.hasAttribute(s.ATTRIBUTE_INPUT_MODE_AFTER_SUBMIT)?s.FORMSTATES.input:s.FORMSTATES.finished;const t=this.data;let e=this.attr(s.ATTRIBUTE_ENDPOINT);if(e){e=await a.default.resolveText(e,t,e);const i=new URL(e,location.href);return await fetch(i.toString(),{method:(this.attr(s.ATTRIBUTE_METHOD)||"post").toLowerCase(),credentials:"include",mode:"cors",headers:{"content-type":"application/json"},body:JSON.stringify(t)})}this.trigger(s.EVENTS.submit,t)}}Object(u.default)(U);e.default=U},function(t,e,i){"use strict";i.r(e);var n=i(0),a=i(5),r=i(17),s=i(2);class u{static findInput(t){return null}constructor(t,e){this.field=t,this.input=e,this.init()}init(){}set readonly(t){}async acceptValue(t){return!0}async normalizeValue(t){return t}async updatedValue(){}get value(){return null}get valid(){return!0}}const o={accept:t=>t instanceof Date,value:t=>t.valueAsDate,normalize:t=>t||null},l={text:{accept:t=>"string"==typeof t,value:t=>t.value,normalize:t=>t&&(t=t.trim()).length>0?t:null},number:{accept:t=>"number"==typeof t,value:t=>t.valueAsNumber,normalize:t=>Object(r.noValue)(t)||Number.isNaN(t)?null:t},date:o,time:o};const c=()=>Math.floor(Math.random()*Date.now());const d=(t,e)=>new Promise((i,n)=>{const a=new FileReader;a.addEventListener("loadend",()=>{i({name:t.name,type:t.type,size:t.size,data:a.result})},!1),a[e](t)}),h={"form-input":async t=>(t.format="form-input",t),"data-url-base64":async t=>{const e=await d(t,"readAsDataURL");return e.format="data-url-base64",e},base64:async t=>{const e=await d(t,"readAsDataURL");return e.data=e.data.substr(e.data.indexOf(",")+1),e.format="base64",e}},f=async(t,e,i)=>{let n=[];for(let i of t)n.push(await h[e](i));return 0==n.length?null:i?n:n[0]};const p=[class extends u{static findInput(t){return t.find('input:not([type="file"]):not([type="radio"]):not([type="checkbox"]) ,input:not([type]), textarea').first()}constructor(t,e){super(t,e)}init(){const{field:t,input:e}=this,i=(t.attr("input-type")||e.attr("type")||"text").trim().toLowerCase();this.type=l[i]||l.text,e.on("input",Object(s.toTimeoutHandle)(()=>{t.trigger(n.EVENTS.input,this.normalizeValue(this.value))},!1,!0)),t.trigger(n.EVENTS.input,this.normalizeValue(this.value))}acceptValue(t){return null==t||void 0===t||this.type.accept(t)}normalizeValue(t){return null==t&&void 0===t?null:this.type.normalize(t)}async updatedValue(t){t!=this.input.value&&this.input.val(t||null)}set readonly(t){this.input.attr("disabled",t?"":null)}get value(){return this.type.value(this.input)}get valid(){return this.input.checkValidity()}},class extends u{static findInput(t){const e=t.find('input[type="checkbox"]');return 0==e.length?null:1==e.length?e.first():e}constructor(t,e){super(t,e)}init(){const{field:t,input:e}=this;this.multiple=e instanceof NodeList,e.on("input",Object(s.toTimeoutHandle)(()=>{t.trigger(n.EVENTS.input,this.normalizeValue(this.value))},!1,!0,n.EVENTHANDLE_INPUT_TIMEOUT)),t.trigger(n.EVENTS.input,this.normalizeValue(this.value))}set readonly(t){this.input.attr("disabled",t?"":null)}get value(){const t=this.input.val();if(!(t instanceof Map))return t;if(0==t.size)return null;const e=[];return t.forEach(t=>{e.push(t)}),e}normalizeValue(t){return t?this.multiple?0!=(t=t.filter(t=>!!t)).length?t:null:t:null}acceptValue(t){if(null==t||void 0===t)return!0;if(this.multiple)return t instanceof Array;{const e=typeof t;return"string"===e||"boolean"===e}}updatedValue(t){this.field.value!=this.value&&this.input.val(t||null)}},class extends u{static findInput(t){const e=t.find('input[type="radio"]');return 0==e.length?null:e}constructor(t,e){super(t,e)}init(){const{field:t,input:e}=this,i=t.name+c();for(let t of e)t.name=i;e.on("input",Object(s.toTimeoutHandle)(()=>{t.trigger(n.EVENTS.input,this.normalizeValue(this.value))},!1,!0,n.EVENTHANDLE_INPUT_TIMEOUT)),t.trigger(n.EVENTS.input,this.normalizeValue(this.value))}set readonly(t){this.input.attr("disabled",t?"":null)}get value(){const t=this.input.val();return t instanceof Map?0==t.size?null:t.values().next().value:t}normalizeValue(t){return t||null}acceptValue(t){if(null==t||void 0===t)return!0;{const e=typeof t;return"string"===e||"boolean"===e}}updatedValue(t){this.field.value!=this.value&&this.input.val(t||null)}},class extends u{static findInput(t){return t.find('input[type="file"]').first()}constructor(t,e){super(t,e)}async init(){const{field:t,input:e}=this;this.multiple=e.multiple,this.format=t.attr("file-format")||"form-input",this.filenameTarget=t.attr("file-name-target"),this.filenameTarget=this.filenameTarget?t.find(this.filenameTarget).first():null;const{format:i,multiple:a}=this;e.on("input",Object(s.toTimeoutHandle)(async()=>{this.updatedValue(await f(e.files,i,a)),t.trigger(n.EVENTS.input,this.value)},!1,!0)),e.files&&0!=e.files.length&&this.updatedValue(await f(e.files,i,a)),t.trigger(n.EVENTS.input,this.value)}set readonly(t){this.input.attr("disabled",t?"":null)}acceptValue(t){return null==t||void 0===t||(this.multiple?t instanceof Array:t instanceof"object")}normalizeValue(t){return null==t||void 0===t?null:this.multiple?0!=t.length?t:null:t}updatedValue(t){if(t!=this.__value__&&(this.__value__=t,this.filenameTarget&&t))if(this.multiple)for(let e of t)this.filenameTarget.append(`<span>${e.name}</span>`);else this.filenameTarget.append(`<span>${t.name}</span>`)}set readonly(t){this.input.attr("disabled",t?"":null)}get value(){return this.__value__}get valid(){return this.input.checkValidity()}},class extends u{static findInput(t){return t.find("select").first()}constructor(t,e){super(t,e)}init(){const{field:t,input:e}=this;e.on("input, changed",Object(s.toTimeoutHandle)(()=>{t.trigger(n.EVENTS.input,this.value)},!1,!0,n.EVENTHANDLE_INPUT_TIMEOUT)),t.trigger(n.EVENTS.input,this.value)}set readonly(t){this.input.attr("disabled",t?"":null)}get value(){return this.normalizeValue(this.input.multiple?this.input.val():this.input.value)}normalizeValue(t){return t?this.input.multiple?0!=(t=t.filter(t=>t&&t.trim().length>0)).length?t:null:0!=(t=t.trim()).length?t:null:null}acceptValue(t){return null==t||void 0===t||(this.input.multiple?t instanceof Array:"string"==typeof t)}updatedValue(t){this.field.value!=this.value&&this.input.val(t||null)}}];var T=i(1);const E=["file-format"];class g extends a.default{static get observedAttributes(){return E.concat(a.default.observedAttributes)}static get NODENAME(){return n.NODENAMES.Field}constructor(){super(),this.__valueChanged__=!0,this.on(n.EVENTS.input,t=>{t.preventDefault(),t.stopPropagation();const e=t.detail?t.detail:null,i=!!this.__valueChanged__||this.__value__!=e;i&&(this.__valueChanged__=i,this.__value__=e,(async()=>{await this.validate(),await this.publishValue()})())})}async init(){await super.init();this.ready.resolved||(this.wrapper=(t=>{for(let e of p){const i=e.findInput(t);if(i)return new e(t,i)}return null})(this),this.wrapper&&this.validator.addCustomCheck(async()=>this.wrapper.valid)),this.__valueChanged__=!0,this.publishValue()}readonlyUpdated(){this.wrapper&&(this.wrapper.readonly=this.readonly)}async acceptValue(t){return!!this.wrapper&&this.wrapper.acceptValue(t)}async normalizeValue(t){return this.wrapper?this.wrapper.normalizeValue(t):t}async updatedValue(t){await this.ready,this.__valueChanged__=!0,this.wrapper&&await this.wrapper.updatedValue(t)}async publishValue(t=[]){this.__valueChanged__&&(await super.publishValue(t),this.__valueChanged__=!1)}}Object(T.default)(g);e.default=g},function(t,e,i){"use strict";i.r(e);var n=i(0),a=(i(17),i(2),i(11)),r=i(1),s=i(5),u=i(8),o=i(6);const l=[];class c extends o.default{static get observedAttributes(){return l.concat(l)}static get NODENAME(){return n.NODENAMES.ButtonDeleteRow}constructor(){super()}async init(){await super.init(),this.active=!0}execute(){this.trigger(100,n.EVENTS.listRowDelete)}}Object(r.default)(c);const d=[];class h extends u.default{static get observedAttributes(){return d.concat(u.default.observedAttributes)}static get NODENAME(){return n.NODENAMES.ListRow}constructor(){super()}get active(){return!0}set active(t){}get condition(){return!0}get name(){return null}}customElements.define(h.NODENAME,h);var f=h;const p=[];class T extends o.default{static get observedAttributes(){return p.concat(p)}static get NODENAME(){return n.NODENAMES.ButtonAddRow}constructor(){super()}async init(){await super.init(),this.active=!0}execute(){this.trigger(100,n.EVENTS.listRowAdd)}}Object(r.default)(T);var E=T,g=i(4);const v=[];class A extends g.default{static get observedAttributes(){return v.concat(v)}static get NODENAME(){return n.NODENAMES.ListRows}constructor(){super()}}customElements.define(A.NODENAME,A);const m=[n.ATTRIBUTE_MAX],_=async(t,e)=>{const{container:i,template:n}=t,a=document.importNode(n.content,!0).children[0];return i.append(a),e&&await a.value(e),a};class N extends s.default{static get observedAttributes(){return m.concat(s.default.observedAttributes)}static get NODENAME(){return n.NODENAMES.List}constructor(t=null){super(t||[]),this.on(n.EVENTS.valueChanged,t=>{const e=t.target;if(e instanceof f){t.preventDefault(),t.stopPropagation();const i=t.detail;this.childValueChanged(e,i)}}),this.on(n.EVENTS.listRowAdd,t=>{t.preventDefault(),t.stopPropagation();const{readonly:e,__value__:i}=this;if(!e){const t=_(this);i.push(t.value),this.validate(),this.publishValue()}}),this.on(n.EVENTS.listRowDelete,t=>{t.preventDefault(),t.stopPropagation();const{rows:e,readonly:i,__value__:a}=this;if(!i){const i=t.target.parent(n.NODENAMES.ListRow),r=e.indexOf(i);r>=0&&(i.remove(),e.splice(r,1),a.splice(r,1),this.validate(),this.publishValue())}})}async init(){await super.init(),this.__value__=[];if(!this.ready.resolved){this.template=this.find("template").first(),this.container=this.find(n.NODENAMES.ListRows).first();const{container:e,template:i,validator:r}=this,u=(t=this,Object(a.treeFilter)({root:t,filter:t=>t instanceof E?{accept:!0,stop:!0}:t instanceof s.default?{accept:!1,stop:!0}:{accept:!1}})[0]);r.addCustomCheck(async({})=>{const{rows:t,max:e,readonly:i}=this,n=t.length;return i||(n==e?u.disabled=!0:n<e&&(u.disabled=!1)),n<=e}),r.addCustomCheck(async()=>{const{rows:t}=this;if(t)for(let e of t)if(!e.valid)return!1;return!0})}var t;this.validate(),this.publishValue()}readonlyUpdated(){const{readonly:t}=this;for(let e of this.rows)e.readonly=t}get rows(){return Array.from(this.container.children)}get max(){return this.hasAttribute(n.ATTRIBUTE_MAX)?parseInt(this.attr(n.ATTRIBUTE_MAX)):Number.MAX_SAFE_INTEGER}acceptValue(t){return!t||t instanceof Array}normalizeValue(t){return t.filter(t=>!!t)}async updatedValue(t){this.container.children.remove(),this.__value__=[];for(let e of t)await _(this,e)}async childValueChanged(t,e){await this.ready;const i=this.rows,n=await t.value(),a=i.indexOf(t);this.__value__[a]=n,await this.validate(),await this.publishValue(e)}}Object(r.default)(N);e.default=N},function(t,e,i){"use strict";i.r(e),function(t){const i=void 0!==t?t:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{};e.default=i}.call(this,i(19))}]);
//# sourceMappingURL=module-defaultjs-html-form.min.js.map