(()=>{var t={16:()=>{Map.prototype.toObject||(Map.prototype.toObject=function(){const t={};for(const[e,i]of this.entries())t[e]=i instanceof Map?i.toObject():i;return t})},353:()=>{String.prototype.hashcode||(String.prototype.hashcode=function(){if(0===this.length)return 0;let t=0;const e=this.length;for(let i=0;i<e;i++)t=(t<<5)-t+this.charCodeAt(i),t|=0;return t})},429:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>a});const a=void 0!==i.g?i.g:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}}},e={};function i(a){var s=e[a];if(void 0!==s)return s.exports;var n=e[a]={exports:{}};return t[a](n,n.exports,i),n.exports}i.d=(t,e)=>{for(var a in e)i.o(e,a)&&!i.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var a={};(()=>{"use strict";i.r(a),i.d(a,{BaseField:()=>Se,BaseSubmitAction:()=>yi,Container:()=>Ze,Field:()=>Je,Form:()=>Mi,List:()=>li,Page:()=>hi,SubmitActionResult:()=>mi});const t="d-",e=100,s=`${t}form`,n=`${t}submit-action`,r=`${t}page`,o=`${t}field`,l=`${t}container`,u=`${t}list`,c=`${t}rows`,h=`${t}row`,d=`${t}add-row`,p=`${t}delete-row`,f=`${t}progress-bar`,g=`${t}step`,v=`${t}validation`,m=`${t}message`,y=`${t}control`,b=`${t}control-back`,w=`${t}control-next`,x=`${t}control-summary`,A=`${t}control-submit`,P="init",V="validating",E="input",N="summary",$="finished",O="d-form-",z=`${O}initialized`,D=`${O}initializesubmit-action`,M=`${O}submit`,C=`${O}submit-results`,S=`${O}condition-state-changed`,T=`${O}field-value-updated`,j=`${O}site-changed`,k=`${O}state-changed`,I=`${O}field-input`,H=`${O}list-row-add`,U=`${O}list-row-delete`,R=`${O}progress-bar-changed`,F=`${O}field-initialized`,L=`${O}field-removed`,q=`${O}page-initialized`,B=`${O}page-removed`,_=`${O}validation-removed`,G=`${O}message-removed`,J=`${O}active-state-changed`,W=`${O}valid-state-changed`,X=`${O}editable-state-changed`,Z=`${O}readonly-state-changed`,K="$item",Q="name",Y="custom-submitted-event",tt="endpoint",et="method",it="state",at="step",st="use-summary-page",nt="input-mode-after-submit",rt="required",ot="condition",lt="active",ut="disabled",ct="editable",ht="editable-condition",dt="readonly",pt="no-value",ft="valid",gt="invalid",vt="evaluate",mt="condition-valid",yt="condition-invalid",bt="min",wt="max",xt="progress";class At{constructor(t,e){this.key=t,this.context=e}get keyDefined(){return this.key in this.context}get hasValue(){return!!this.context[this.key]}get value(){return this.context[this.key]}set value(t){this.context[this.key]=t}set append(t){if(this.hasValue){const e=this.value;e instanceof Array?e.push(t):this.value=[this.value,t]}else this.value=t}remove(){delete this.context[this.key]}static load(t,e,i=!0){let a=t;const s=e.split(".");let n=s.shift().trim();for(;s.length>0;){if(!a[n]){if(!i)return null;a[n]={}}a=a[n],n=s.shift().trim()}return new At(n,a)}}const Pt=t=>null==t||void 0===t,Vt=t=>{if(null==t)return!0;switch(typeof t){case"number":case"bigint":case"boolean":case"string":case"undefined":return!0}return!1},Et=t=>!(Pt(t)||"object"!=typeof t||t.constructor&&"Object"!==t.constructor.name),Nt=(t,e)=>{const i=Pt(t),a=Pt(e);if(i||a)return t===e;if(Vt(t)||Vt(e))return t===e;const s=typeof t;return s==typeof e&&("function"===s?t===e:((t,e)=>{const i=Object.keys(t),a=Object.keys(e);if(i.length!==a.length)return!1;for(const a of i){const i=t[a],s=e[a];if(!Nt(i,s))return!1}return!0})(t,e)&&((t,e)=>{const i=Object.getPrototypeOf(t),a=Object.getPrototypeOf(e);if(i!=a)return!1;if(!i)return!0;const s=Object.getOwnPropertyNames(i),n=Object.getOwnPropertyNames(a);if(s.length!==n.length)return!1;for(const i of s){const a=t[i],s=e[i];if(!Nt(a,s))return!1}return!0})(t,e))},$t=t=>{if(!Et(t))return!1;for(const e in t)if("function"==typeof t[e])return!1;return!0},Ot=function(t,...e){t||(t={});for(let i of e)$t(i)&&Object.getOwnPropertyNames(i).forEach((e=>{$t(t[e])?Ot(t[e],i[e]):t[e]=i[e]}));return t},zt=function(){const[t,e,{deep:i=!1,recursive:a=!0,parents:s=[]}={}]=arguments,n={};for(let r in t){const o=t[r],l=e(r,o,t);!l||i&&null!=o?l&&i&&("object"!=typeof o||o instanceof Array||o instanceof Map||o instanceof Set||o instanceof RegExp||s.includes[o]||o==t?n[r]=o:n[r]=zt(o,e,{deep:i,recursive:a,parents:s.concat(t)})):n[r]=o}return n},Dt=(t,e,i)=>{Object.defineProperty(t,e,{value:i,writable:!1,configurable:!1,enumerable:!1})},Mt=(t,e,i)=>{Object.defineProperty(t,e,{get:i,configurable:!1,enumerable:!1})},Ct={isNullOrUndefined:Pt,isObject:Et,equalPojo:Nt,isPojo:$t,append:function(t,e,i){return void 0!==e&&(At.load(i,t,!0).append=e),i},merge:Ot,filter:zt,buildPropertyFilter:function({names:t,allowed:e}){return(i,a,s)=>t.includes(i)===e},defValue:Dt,defGet:Mt,defGetSet:(t,e,i,a)=>{Object.defineProperty(t,e,{get:i,set:a,configurable:!1,enumerable:!1})}},St=()=>{let t=null,e=null;const i=new Promise(((i,a)=>{t=i,e=a}));let a,s=!1,n=!1;return Dt(i,"resolve",(i=>{a=i,s=!0,a instanceof Error?(n=!0,e(a)):t(a)})),Mt(i,"value",(()=>a)),Mt(i,"error",(()=>n)),Mt(i,"resolved",(()=>s)),i},Tt=St,jt=()=>{const t=new Uint32Array(4);window.crypto.getRandomValues(t);let e=-1;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(i=>{e++;const a=t[e>>3]>>e%8*4&15;return("x"==i?a:3&a|8).toString(16)}))},kt=(t,e,i=":")=>{let a="unsupported";if("string"==typeof e)a=e;else if(e instanceof HTMLElement)a=e.nodeName;else{if("string"!=typeof e.NODENAME)throw new Error(typeof e+' is not supported as parameter "node"!');a=e.NODENAME}return`${a.toLowerCase()}${i}${t}`},It=t=>class extends t{static get NODENAME(){return this.nodeName.toLowercase()}static get observedAttributes(){return[]}#t=null;#e=[];constructor({shadowRoot:t=!1,content:e=null,createUID:i=!1,uidPrefix:a="id-",uidSuffix:s="",postConstucts:n=null}={}){if(super(),this.#t=St(),i&&this.#e.push((async()=>this.attr("id",((t,e)=>{let i=0,a=null;for(;i<100;){if(a=`${t||""}${jt()}${e||""}`,!document.getElementById(a))return a;i++}return console.error(new Error("To many retries to create an unique id - created id is not unique!")),a})(a,s)))),t&&this.attachShadow({mode:"open"}),e&&this.root.append("function"==typeof e?e(this):e),n instanceof Array)for(let t of n)"function"==typeof t&&this.#e.push(t)}get postConstructs(){return this.#e}get root(){return this.shadowRoot||this}get ready(){return this.#t}async init(){for(let t of this.#e)await t(this)}async destroy(){this.ready.resolved&&(this.#t=St())}connectedCallback(){this.ownerDocument==document&&this.isConnected&&this.init().then((t=>this.#t.resolve(t))).catch((t=>this.#t.resolve(t)))}adoptedCallback(){this.connectedCallback()}attributeChangedCallback(t,e,i){e!=i&&this.isConnected&&(this.trigger(10,((t,e,i=":")=>kt(`attribute--${t}`,e,i))(t,this)),this.trigger(10,kt("change",this)))}disconnectedCallback(){this.destroy()}},Ht=new Map,Ut=(t=>{let e=Ht.get(t);return null==e&&(e=It(t),Ht.set(t,e)),e})(HTMLElement);var Rt=i(429);class Ft{constructor(t){this.hasValue=1==arguments.length,this.value=t}}class Lt{constructor(t,e){this.data=t,this.resolver=e,this.cache=new Map}updateData(t){this.data=t,this.cache=new Map}resetCache(){this.cache=new Map}getPropertyDef(t,e=!0){if(this.cache.has(t))return this.cache.get(t);let i=null;if(this.data&&t in this.data)i={data:this.data,resolver:this.resolver,defined:!0};else{if(!e)return null;i=((t,e)=>{for(;t;){const i=t.proxy.handle.getPropertyDef(e,!1);if(i)return i;t=t.parent}return{data:null,resolver:null,defined:!1}})(this.resolver.parent,t)}return i.defined&&this.cache.set(t,i),i}hasProperty(t){const{defined:e}=this.getPropertyDef(t);return e}getProperty(t){const{data:e}=this.getPropertyDef(t);return e?e[t]:void 0}setProperty(t,e){const{data:i,defined:a}=this.getPropertyDef(t);a?i[t]=e:(this.data||(this.data={}),this.data[t]=e,this.cache.set(t,{data:this.data,resolver:this.resolver,defined:!0}))}deleteProperty(t){throw new Error("unsupported function!")}}class qt{#i=null;#a=null;constructor(t,e){this.#i=new Lt(t,e),this.#a=new Proxy(this.#i,{has:function(t,e){return t.hasProperty(e)},get:function(t,e){return t.getProperty(e)},set:function(t,e,i){return t.setProperty(e,i)},deleteProperty:function(t,e){return t.deleteProperty(e)}})}get data(){return this.#a}get handle(){return this.#i}updateData(t){this.#i.updateData(t)}resetCache(){this.#i.resetCache()}}const Bt=/(\\?)(\$\{(([a-zA-Z0-9\-_\s]+)::)?([^\{\}]+)\})/,_t=new Map,Gt=new Ft,Jt=t=>t instanceof Ft?t:new Ft(t),Wt=async function(t,e,i,a){if(i&&t.name!=i)return t.parent?Wt(t.parent,e,i,a):null;const s=await async function(t,e){if("string"!=typeof t)return t;if(null==(t=Zt(t)))return t;try{const i=(t=>{if(_t.has(t))return _t.get(t);const e=new Function("context",`\nreturn (async (context) => {\n\ttry{ \n\t\twith(context){\n\t\t\t return ${t}\n\t\t}\n\t}catch(e){\n\t\tthrow e;\n\t}\n})(context);`);return _t.set(t,e),e})(t);return await i(e)}catch(e){console.error(`Error by statement "${t}":`,e)}}(e,t.proxy.data);return null!=s?s:a instanceof Ft&&a.hasValue?a.value:void 0},Xt=async(t,e,i)=>e[1]?e[2]:Wt(t,e[5],Zt(e[4]),i),Zt=t=>t?0==(t=t.trim()).length?null:t:null;class Kt{constructor({context:t=Rt.default,parent:e=null,name:i=null}){this.parent=e instanceof Kt?e:null,this.name=i,this.context=t,this.proxy=new qt(this.context,this)}get chain(){return this.parent?this.parent.chain+"/"+this.name:"/"+this.name}get effectiveChain(){return this.context?this.parent?this.parent.effectiveChain+"/"+this.name:"/"+this.name:this.parent?this.parent.effectiveChain:""}get contextChain(){const t=[];let e=this;for(;e;)e.context&&t.push(e.context),e=e.parent;return t}getData(t,e){if(t){if(!e||e==this.name){const e=At.load(this.context,t,!1);return e?e.value:null}this.parent&&this.parent.getData(t,e)}}updateData(t,e,i){t&&(i&&i!=this.name?this.parent&&this.parent.updateData(t,e,i):(null!=this.context&&void 0!==this.context||(this.context={},this.proxy.updateData(this.context)),At.load(this.context,t).value=e,this.proxy.resetCache()))}mergeContext(t,e){e&&e!=this.name?this.parent&&this.parent.mergeContext(t,e):this.context=this.context?Ct.merge(this.context,t):t}async resolve(t,e){const i=2==arguments.length?Jt(e):Gt;try{const e=Bt.exec(t);return e?await Xt(this,e,i):await Wt(this,Zt(t),null,i)}catch(e){return console.error('error at executing statment"',t,'":',e),i.hasValue?i.value:t}}async resolveText(t,e){let i=t,a=t,s=Bt.exec(i);const n=2==arguments.length?Jt(e):Gt;for(;null!=s;){const t=await Xt(this,s,n);a=a.split(s[0]).join(),i=i.split(s[0]).join(void 0===t?"undefined":null==t?"null":t),s=Bt.exec(a)}return i}static async resolve(t,e,i,a){const s=new Kt({context:e}),n=arguments.length>2?Jt(i):Gt;return"number"==typeof a&&a>0?new Promise((e=>{setTimeout((()=>{e(s.resolve(t,n))}),a)})):s.resolve(t,n)}static async resolveText(t,e,i,a){const s=new Kt({context:e}),n=arguments.length>2?Jt(i):Gt;return"number"==typeof a&&a>0?new Promise((e=>{setTimeout((()=>{e(s.resolveText(t,n))}),a)})):s.resolveText(t,n)}static buildSecure({context:t,propFilter:e,option:i={deep:!0},name:a,parent:s}){return t=Ct.filter({data:t,propFilter:e,option:i}),new Kt({context:t,name:a,parent:s})}}const Qt=class{#s;#n;constructor(t){this.#s=t}async init(){}get condition(){return this.#n||(this.#n=this.#s.attr(ot)||!1),this.#n}async validate(t){const e=this.#s;let i=this.condition;const a=e.condition;try{i=!i||await Kt.resolve(i,t,!1)}catch{i=!1}return i!=a&&(e.condition=i),i}},Yt=class{#s;#n=null;constructor(t){this.#s=t}async init(){}get condition(){return null==this.#n&&(this.#n=(this.#s.attr(ht)||"").trim()||!1),this.#n}async validate(t){let e=!0;const i=this.#s.editable,a=this.condition;try{e=!a||await Kt.resolve(a,t,!1)}catch{e=!1}return e!=i&&(this.#s.editable=e),e}},te=t=>null==t||void 0===t;function ee(...t){const e=t=>t&&"object"==typeof t;return t.reduce(((t,i)=>(Object.keys(i).forEach((a=>{const s=t[a],n=i[a];Array.isArray(s)&&Array.isArray(n)?t[a]=s.concat(...n):e(s)&&e(n)?t[a]=ee(s,n):t[a]=n})),t)),{})}const ie=async(t,e,i)=>(te(i)||(e?ne(t,e,i):t=ee(t,i)),t),ae=async(t,e)=>{let i={};if(e)for(let a of e){const e=a.name,s=t.get(a);i=await ie(i,e,s)}else for(let[{name:e},a]of t)i=await ie(i,e,a);return i},se=/\./g,ne=function(t,e,i){const a=e.split(se);if(2==arguments.length)return oe(t,a);const s=te(i);return te(t)&&s?t:re(s,t,i,a)},re=(t,e,i,a)=>{if(te(e)&&t)return null;const s=a.shift();return 0==a.length?t?delete e[s]:e[s]=i:(e[s]=e[s]||{},re(t,e[s],i,a)),e},oe=(t,e)=>{if(te(t))return null;if(0==e.length)return t;const i=e.shift();return oe(t[i],e)},le=(t,e)=>{if(null!=e)for(let i of e)t.add(i);return t},ue=({root:t,filter:e})=>{let i=[];return t.children.forEach((t=>{const{accept:a,stop:s=!1}=e(t);if(a&&i.push(t),!s){const a=ue({root:t,filter:e});a instanceof Array?i=i.concat(a):a&&i.push(a)}})),i},ce=function(t,e){const i=t.NODENAME;customElements.get(i)||customElements.define(i,t,e)},he=[lt,ot];class de extends Ut{static get observedAttributes(){return he}static get NODENAME(){return v}constructor(){super()}async init(){await super.init(),this.active=!1}async destroy(){this.trigger(_),await super.destroy()}get active(){return this.hasAttribute(lt)}set active(t){t?this.attr(lt,""):this.attr(lt,null)}get condition(){return this.attr(ot)}async validate({hasValue:t,data:e}){const i=!t||await Kt.resolve(this.condition,e,!1);return this.active=!i,i}}ce(de);const pe=de,fe=async(t,e)=>(await Promise.all(e.map((e=>e.validate(t))))).reduce(((t,e)=>!!t&&e),!0),ge=class{#s=null;#r=new Set;#o=new Set;constructor(t){this.#s=t,t.on(_,(t=>{t.stopPropagation(),this.#r.delete(t.target)}))}async init(){const t=this.#s,{form:e,id:i,name:a}=t,s=this.validations;var n;i&&0!=i.length&&(le(s,e.find(`${v}[for="${i}"]`)),le(s,e.find(`${v}[for="#${i}"]`))),a&&0!=a.length&&le(s,e.find(`${v}[for="${a}"]`)),le(s,ue({root:n=t,filter:t=>{if(n!=t){if(t instanceof Oe)return{accept:!1,stop:!0};if(t instanceof pe&&null==t.attr("for"))return{accept:!0,stop:!0}}return{accept:!1}}}))}get validations(){return this.#r}get customValidations(){return this.#o}addCustomValidation(t){this.#o.add(t)}async validate(t){const e=this.#s,{hasValue:i,required:a,condition:s,editable:n}=e;let r=!0;if(s){r=!a||i;const o={hasValue:i,required:a,condition:s,editable:n,data:t,base:e};r=await(async(t,e)=>0==t.size||(await Promise.all(Array.from(t).map((t=>t(e))))).every((t=>t)))(this.#o,o)&&r,r=await(async(t,e)=>0==t.size||(await Promise.all(Array.from(t).map((t=>t.validate(e))))).every((t=>t)))(this.#r,o)&&r}return e.valid=r,r}},ve="active",me="condition",ye=[ve,me];class be extends Ut{static get observedAttributes(){return ye}static get NODENAME(){return m}constructor(){super()}async init(){await super.init()}async destroy(){this.trigger(G),await super.destroy()}get active(){return this.hasAttribute(ve)}set active(t){t?this.attr(ve,""):this.attr(ve,void 0)}get condition(){return this.attr(me)}async update(t){await this.ready,this.active=await Kt.resolve(this.condition,t,!1)}}ce(be);const we=be,xe=class{#s=null;#l=new Set;constructor(t){this.#s=t,t.on(G,(t=>{t.preventDefault(),t.stopPropagation();const e=t.target;this.#l.delete(e)}))}async init(){const t=this.#s,{form:e,id:i,name:a}=t,s=this.messages;var n;i&&0!=i.length&&(le(s,e.find(`${m}[for="${i}"]`)),le(s,e.find(`${m}[for="#${i}"]`))),a&&0!=a.length&&le(s,e.find(`${m}[for="${a}"]`)),le(s,ue({root:n=t,filter:t=>{if(n!=t){if(t instanceof Oe)return{accept:!1,stop:!0};if(t instanceof we&&null==t.attr("for"))return{accept:!0,stop:!0}}return{accept:!1}}}))}get messages(){return this.#l}async validate(t){for(let e of this.#l)e.update(t)}},Ae=new WeakMap,Pe=function(t,e,i){const a=(t=>{if(Ae.has(t))return Ae.get(t);const e={};return Ae.set(t,e),e})(t);if(1===arguments.length)return a;if(2===arguments.length)return a[e];if(3!==arguments.length)throw new Error("Not allowed size of arguments!");a[e]=i},Ve=t=>function(e,i){if(2!=arguments.length)return Pe(e,t);Pe(e,t,i)},Ee=(t,e,i=!1)=>{const a=t.active;e?t.attr(lt,""):t.attr(lt,null),(a!=e||i)&&t.trigger(J)},Ne=Ve("form"),$e=[lt,dt,ot,mt,yt,ht],Oe=class extends Ut{static get observedAttributes(){return $e}#u=!1;#c;#h;#d;#p;#f=!1;#g=!1;constructor(){super(),this.#p=new xe(this),this.#c=new Qt(this),this.#h=new Yt(this),this.#d=new ge(this)}async init(){await super.init(),this.#u||(this.#u=!0,await this.#c.init(),await this.#p.init(),await this.#d.init(),await this.#h.init())}get id(){return(super.id||"").trim()}get name(){return(super.name||"").trim()}get validationHandle(){return this.#d}get messageHandle(){return this.#p}addValidation(t){this.#d.addCustomValidation(t)}async validate(t){this.attr(vt,"");const e=Object.assign({},t,await(async t=>{await t.ready;const e={};e.$value=await t.rawValue();let i=t.parent(h),a=e;for(;i;)a[K]=await i.rawValue(),a=a[K],i=i.parent(h);return e})(this));return await this.#c.validate(e),await this.#h.validate(e),await this.#d.validate(e),this.attr(vt,null),await this.#p.validate(e),this.valid}get form(){let t=Ne(this);return t||(t=this.parent(s),Ne(this,t)),t}get active(){return this.hasAttribute(lt)}set active(t){this.active!=t&&(Ee(this,t),this.activeUpdated())}async activeUpdated(){}get readonly(){return this.#f}set readonly(t){this.#f=t||!this.editable,((t,e,i=!1)=>{const a=t.readonly;e?t.attr(dt,""):t.attr(dt,null),(a!=e||i)&&t.trigger(Z)})(this,this.#f,!this.ready.resolved),this.readonlyUpdated()}async readonlyUpdated(){}get editable(){return this.#g}set editable(t){this.#g=t,((t,e,i=!1)=>{const a=t.editable;e?t.attr(ct,""):t.attr(ct,null),(a!=e||i)&&t.trigger(X)})(this,t,!this.ready.resolved),this.editableUpdated()}async editableUpdated(){}set condition(t){var e,i;e=this,void 0===(i=t)||null==i?(e.attr(yt,null),e.attr(mt,null)):i?(e.attr(yt,null),e.attr(mt,"")):(e.attr(mt,null),e.attr(yt,"")),e.trigger(S),this.conditionUpdated()}get condition(){return!this.hasAttribute(yt)}async conditionUpdated(){}set valid(t){((t,e)=>{void 0===e||null==e?(t.attr(gt,null),t.attr(ft,null)):e?(t.attr(gt,null),t.attr(ft,"")):(t.attr(gt,""),t.attr(ft,null)),t.trigger(W)})(this,t),this.validUpdated()}get valid(){return this.hasAttribute(ft)}async validUpdated(){}},ze=t=>{if(te(t))return!0;const e=typeof t;return"string"===e&&0==t.trim().length||!(t instanceof Date)&&(t instanceof Array&&0==t.length||t instanceof Set&&0==t.length||t instanceof Map&&0==t.length||"object"==e&&0==Object.getOwnPropertyNames(t).length)},De=Ve("parent"),Me=[Q,rt,pt];class Ce extends Oe{static get observedAttributes(){return Me.concat(Oe.observedAttributes)}#v=null;constructor(t={}){super(t);const{value:e}=t;this.#v=e,this.root.on(T,(t=>{t.stopPropagation(),t.preventDefault()}))}async init(){this.ready.then((()=>this.trigger(F))),await super.init()}async destroy(){this.publishValue(null),await super.destroy(),this.trigger(L)}get parentField(){let t=De(this);return t||(t=(()=>{let t=this.parentNode;for(;t;){if(t instanceof Ce)return t;t=t.parentNode}return null})(),De(this,t)),t}async conditionUpdated(){this.active=this.condition,await this.publishValue()}get name(){return this.getAttribute(Q)}get required(){return this.hasAttribute(rt)}get hasValue(){return!this.hasAttribute(pt)}async rawValue(t){if(0===arguments.length)return this.#v;this.#v=await t}async value(t){const{condition:e,valid:i,ready:a}=this,s=await this.rawValue();if(0==arguments.length)return e&&i?s:null;if(await a,await this.acceptValue(t)&&s!=(t=await this.normalizeValue(t)||t)){const e=await this.updatedValue(t);void 0!==e&&(t=e),await this.publishValue(t)}}async validate(t){const e=this.condition,i=this.valid,a=await super.validate(t),s=this.condition;return this.validationStateChanged(e!=s,i!=a),a}async validationStateChanged(t,e){(t||e)&&this.publishValue()}async updatedValue(t){return this.trigger(T,t),t}async publishValue(t){await this.ready,0===arguments.length?t=await this.rawValue():await this.rawValue(t);const e=ze(t),i=this.condition;var a;t=this.required&&e||!i?null:t,a=!e,this.attr(pt,a?null:""),this.parentField?await this.parentField.childValueChanged(this,t):this.form&&await this.form.childValueChanged(this,t)}async acceptValue(t){return!0}async normalizeValue(t){return t}async childValueChanged(t,e){}}const Se=Ce,Te=(t,e,i,a)=>{let s=null;const n="function"==typeof e?e:()=>e,r="function"==typeof i?i:()=>i;return e=>{n(e)&&e.preventDefault(),r(e)&&e.stopPropagation();const i=(t=>({type:t.type,target:t.target,detail:t.detail,currentTarget:t.currentTarget,explicitOriginalTarget:t.explicitOriginalTarget,originalTarget:t.originalTarget,srcElement:t.srcElement,timeStamp:t.timeStamp}))(e);s&&clearTimeout(s),s=setTimeout((()=>{s=null,t(i)}),a||10)}};class je{static findInput(t){return null}constructor(t,e){this.field=t,this.input=e}async init(){}set readonly(t){}async acceptValue(t){return!0}async normalizeValue(t){return t}async updatedValue(){}get value(){return null}get valid(){return!0}}const ke="text",Ie=t=>({accept:t=>"number"==typeof t,getValue:()=>Number.isNaN(t.valueAsNumber)?null:t.valueAsNumber,setValue:e=>{t.valueAsNumber=e},normalize:t=>te(t)||Number.isNaN(t)?null:t}),He=t=>({accept:t=>t instanceof Date||"string"==typeof t||"number"==typeof t,getValue:()=>t.valueAsDate,setValue:e=>{t.valueAsDate=e},normalize:t=>t?t instanceof Date?t:new Date(t):null}),Ue=new Intl.DateTimeFormat("default",{hour:"numeric",minute:"numeric"}),Re={text:t=>({accept:t=>"string"==typeof t,getValue:()=>t.value,setValue:e=>t.value=e,normalize:t=>t&&(t=t.trim()).length>0?t:null}),number:Ie,datetime:He,"datetime-local":He,date:He,time:t=>({accept:t=>t instanceof Date,getValue:()=>t.value?new Date(`1970-01-01T${t.value}`):null,setValue:e=>{t.value=Ue.format(e)},normalize:t=>t||null}),range:Ie},Fe=(t,e)=>new Promise((i=>{const a=new FileReader;a.addEventListener("loadend",(()=>{i({name:t.name,type:t.type,size:t.size,data:a.result})}),!1),a[e](t)})),Le={"form-input":async t=>(t.format="form-input",t),"data-url-base64":async t=>{const e=await Fe(t,"readAsDataURL");return e.format="data-url-base64",e},base64:async t=>{const e=await Fe(t,"readAsDataURL");return e.data=e.data.substr(e.data.indexOf(",")+1),e.format="base64",e}},qe=async(t,e,i)=>{let a=[];for(let i of t)a.push(await Le[e](i));return 0==a.length?null:i?a:a[0]},Be=[class extends je{static findInput(t){return t.find('input:not([type="file"],[type="radio"],[type="checkbox"],[type="button"],[type="submit"],[type="reset"]),input:not([type]), textarea').first()}constructor(t,e){super(t,e)}init(){const{field:t,input:i}=this,a=(t.attr("input-type")||i.attr("type")||ke).trim().toLowerCase();this.type=(Re[a]||Re[ke])(i),i.on("input",Te((()=>{t.trigger(I,this.normalizeValue(this.value))}),!1,!0,e)),t.trigger(I,this.normalizeValue(this.value))}acceptValue(t){return null==t||void 0===t||this.type.accept(t)}normalizeValue(t){return null==t&&void 0===t?null:this.type.normalize(t)}async updatedValue(t){t!=this.type.getValue()&&this.type.setValue(t)}set readonly(t){this.input.attr("disabled",t?"":null)}get value(){return this.type.getValue()}get valid(){return this.input.checkValidity()}},class extends je{static findInput(t){const e=t.find('input[type="checkbox"]');return 0==e.length?null:1==e.length?e.first():e}constructor(t,e){super(t,e)}init(){const{field:t,input:i}=this;this.multiple=i instanceof NodeList,i.on("input",Te((()=>{t.trigger(I,this.normalizeValue(this.value))}),!1,!0,e)),t.trigger(I,this.normalizeValue(this.value))}set readonly(t){this.input.attr("disabled",t?"":null)}get value(){const t=this.input.val();if(!(t instanceof Map))return t;if(0==t.size)return null;const e=[];return t.forEach((t=>{e.push(t)})),e}normalizeValue(t){return t?this.multiple?0!=(t=t.filter((t=>!!t))).length?t:null:t:null}acceptValue(t){if(null==t||void 0===t)return!0;if(this.multiple)return t instanceof Array;{const e=typeof t;return"string"===e||"boolean"===e}}updatedValue(t){this.input.val(t||null)}},class extends je{static findInput(t){const e=t.find('input[type="radio"]');return 0==e.length?null:e}constructor(t,e){super(t,e)}init(){const{field:t,input:i}=this,a=t.name+Math.floor(Math.random()*Date.now());for(let t of i)t.name=a;i.on("input",Te((()=>{t.trigger(I,this.normalizeValue(this.value))}),!1,!0,e)),t.trigger(I,this.normalizeValue(this.value))}set readonly(t){this.input.attr("disabled",t?"":null)}get value(){const t=this.input.val();return t instanceof Map?0==t.size?null:t.values().next().value:t}normalizeValue(t){return t||null}acceptValue(t){if(null==t||void 0===t)return!0;{const e=typeof t;return"string"===e||"boolean"===e}}updatedValue(t){this.input.val(t||null)}},class extends je{static findInput(t){return t.find('input[type="file"]').first()}#v=null;constructor(t,e){super(t,e)}async init(){await super.init();const{field:t,input:e}=this;this.multiple=e.multiple,this.format=t.attr("file-format")||"form-input",this.filenameTarget=t.attr("file-name-target"),this.filenameTarget=this.filenameTarget?t.find(this.filenameTarget).first():null;const{format:i,multiple:a}=this;e.on("input",Te((async()=>{this.updatedValue(await qe(e.files,i,a)),t.trigger(I,this.value)}),!1,!0)),e.files&&0!=e.files.length&&this.updatedValue(await qe(e.files,i,a)),t.trigger(I,this.value)}set readonly(t){this.input.attr("disabled",t?"":null)}acceptValue(t){return null==t||void 0===t||(this.multiple?t instanceof Array:"object"==typeof t)}normalizeValue(t){return null==t||void 0===t?null:this.multiple?0!=t.length?t:null:t}updatedValue(t){if(t!=this.#v){this.#v=t,t||(this.input.value=null);const e=this.filenameTarget;if(e&&(e.empty(),t))if(this.multiple)for(let i of t)e.append(`<span>${i.name}</span>`);else e.append(`<span>${t.name}</span>`)}}get value(){return this.#v}get valid(){return this.input.checkValidity()}},class extends je{static findInput(t){return t.find("select").first()}constructor(t,e){super(t,e)}init(){const{field:t,input:i}=this;i.on("input, changed",Te((()=>{t.trigger(I,this.value)}),!1,!0,e))}set readonly(t){this.input.attr("disabled",t?"":null)}get value(){return this.normalizeValue(this.input.multiple?this.input.val():this.input.value)}normalizeValue(t){return t?this.input.multiple?0!=(t=t.filter((t=>t&&t.trim().length>0))).length?t:null:0!=(t=t.trim()).length?t:null:null}acceptValue(t){return null==t||void 0===t||(this.input.multiple?t instanceof Array:"string"==typeof t)}updatedValue(t){const e=this.input.val();this.field.value!=this.value&&this.input.val(t||e)}}],_e=["file-format"];class Ge extends Se{static get observedAttributes(){return _e.concat(Se.observedAttributes)}static get NODENAME(){return o}#u=!1;#m;constructor(t){super(t),this.on(I,(t=>{t.preventDefault(),t.stopPropagation(),this.publishValue(t.detail||null)}))}async init(){await super.init(),this.#u||(this.#u=!0,this.#m=(t=>{for(let e of Be){const i=e.findInput(t);if(i)return new e(t,i)}return null})(this),this.#m&&(await this.#m.init(),this.addValidation((async()=>this.#m.valid)),this.publishValue(this.#m.value)))}readonlyUpdated(){this.#m&&(this.#m.readonly=this.readonly)}async acceptValue(t){return!!this.#m&&this.#m.acceptValue(t)}async normalizeValue(t){return this.#m?this.#m.normalizeValue(t):t}async updatedValue(t){await this.ready,t=await t;const e=this.#m;e&&((e.value||null)!=t&&await e.updatedValue(t),await super.updatedValue(e.value))}async validationStateChanged(t,e){if(t&&this.condition){const t=this.#m.value||null;this.rawValue(t)}return super.validationStateChanged(t,e)}}ce(Ge);const Je=Ge,We=[];class Xe extends Se{static get observedAttributes(){return We.concat(Se.observedAttributes)}static get NODENAME(){return l}#y=null;#v=new Map;constructor(t){super(t);const e=this.root;e.on(F,(t=>{const e=t.target;e!=this&&(!(e instanceof Se)||this.#y&&this.#y.has(e)||(this.#y=null),t.stopPropagation())})),e.on(L,(t=>{const e=t.target;e!=this&&(e instanceof Se&&this.#y&&this.#y.has(e)&&this.#y.delete(e),t.stopPropagation())})),this.addValidation((async({data:t})=>await fe(t,this.fields)))}get fields(){return this.#y||(this.#y=new Set(ue({root:this,filter:t=>t instanceof Se?{accept:!0,stop:!0}:{accept:!1}}))),Array.from(this.#y)}readonlyUpdated(){const{readonly:t,fields:e}=this;if(e)for(let i of e)i.readonly=t}async updatedValue(t){await this.ready;const e=this.#v;e.clear();const i=this.fields;i&&await Promise.all(i.map((async i=>{const a=i.name?ne(t,i.name):t;te(a)||e.set(i,a),await i.value(a)})));let a=await ae(this.#v,i);return 0==Object.getOwnPropertyNames(a).length&&(a=null),a}async childValueChanged(t,e){e=await e;const i=this.#v;if(t){const a=i.has(t),s=i.get(t);if(a&&s==e)return;te(e)?i.delete(t):i.set(t,e)}let a=await ae(i,this.fields);0==Object.getOwnPropertyNames(a).length&&(a=null),await this.publishValue(a)}}ce(Xe);const Ze=Xe,Ke=[lt,ut],Qe=class extends Ut{static get observedAttributes(){return Ke}#u=!1;#b;constructor(){super(),this.on("click",(t=>{t.preventDefault(),t.stopPropagation(),this.active&&!this.disabled&&this.execute()}))}async init(){this.attr("tabindex","0").attr("role","button"),await super.init(),this.#u&&(this.#u=!0,this.active=!1,this.disabled=!1)}get form(){return this.#b||(this.#b=this.parent(s)),this.#b}get active(){return this.hasAttribute(lt)}set active(t){this.attr(lt,t?"":null)}get disabled(){return this.hasAttribute(ut)}set disabled(t){this.attr(ut,t?"":null)}execute(){console.log("execute")}},Ye=[];ce(class extends Qe{static get observedAttributes(){return Ye.concat(Ye)}static get NODENAME(){return p}constructor(){super()}async init(){await super.init(),this.active=!0}execute(){this.trigger(U)}});const ti=[];ce(class extends Ut{static get observedAttributes(){return ti}static get NODENAME(){return c}constructor(){super()}});const ei=[];class ii extends Ze{static get observedAttributes(){return ei.concat(Ze.observedAttributes)}static get NODENAME(){return h}constructor(t){super(t)}get active(){return!0}set active(t){}get condition(){return!0}get name(){return null}}customElements.define(ii.NODENAME,ii);const ai=`${d}:initialized`,si=[];ce(class extends Qe{static get observedAttributes(){return si.concat(si)}static get NODENAME(){return d}constructor(){super(),this.ready.then((()=>this.trigger(ai)))}async init(){await super.init(),this.active=!0}execute(){this.trigger(H)}});const ni=[bt,wt],ri=async(t,e)=>{let i=[];for(let a of t)i.push(e.get(a));return 0==i.length&&(i=null),i};class oi extends Se{static get observedAttributes(){return ni.concat(Se.observedAttributes)}static get NODENAME(){return u}#w;#x;#A=new Map;#P;#u=!1;constructor(t){super(t);const e=this.root;e.on(ai,(t=>{this.#P=t.target,t.stopPropagation()})),e.on(F,(t=>{t.target!=this&&(t.preventDefault(),t.stopPropagation())})),e.on(H,(t=>{t.preventDefault(),t.stopPropagation();const{readonly:e}=this;e||this.createRow()})),e.on(U,(t=>{t.preventDefault(),t.stopPropagation();const{rows:e,readonly:i}=this;if(!i){const i=t.target.parent(h);e.indexOf(i)>=0&&i.remove()}})),this.addValidation((async()=>{const{rows:t,min:e,max:i,readonly:a}=this,s=t.length;return this.#P&&!a&&(s==i?this.#P.disabled=!0:s<i&&(this.#P.disabled=!1)),e<=s&&s<=i})),this.addValidation((async t=>await fe(t,this.rows)))}async init(){if(await super.init(),!this.#u){this.#u=!0;const t=this.find("template").first();t&&(this.#w=t.content),this.#x=this.find(c).first()}}readonlyUpdated(){const{readonly:t}=this;for(let e of this.rows)e.readonly=t}get rows(){return this.#x?Array.from(this.#x.children):[]}get min(){return this.hasAttribute(bt)?Math.max(0,parseInt(this.attr(bt))):0}get max(){return this.hasAttribute(wt)?parseInt(this.attr(wt)):Number.MAX_SAFE_INTEGER}acceptValue(t){return!t||t instanceof Array}normalizeValue(t){return t?t.filter((t=>!!t)):null}async createRow(t){const e=document.importNode(this.#w,!0).children[0];return await this.#x.append(e),t&&await e.value(t),e}async updatedValue(t){return this.#A.clear(),this.#x.empty(),t&&await Promise.all(t.map((t=>this.createRow(t)))),await ri(this.rows,this.#A)}async childValueChanged(t,e){e=await e;const i=this.#A;te(e)?this.#A.delete(t):this.#A.set(t,e),await super.childValueChanged(t,e);const a=await ri(this.rows,i);await this.publishValue(a)}}ce(oi);const li=oi,ui=[at];class ci extends Ze{static get observedAttributes(){return ui.concat(Ze.observedAttributes)}static get NODENAME(){return r}constructor(t){super(t),this.ready.then((()=>this.trigger(q)))}async destroy(){this.trigger(B),await super.destroy()}get step(){return this.attr(at)}conditionUpdated(){}}ce(ci);const hi=ci,di=[];ce(class extends Qe{static get observedAttributes(){return di}static get NODENAME(){return b}constructor(){super()}execute(){this.form.toPrevPage()}});const pi=[];ce(class extends Qe{static get observedAttributes(){return pi}static get NODENAME(){return w}constructor(){super()}execute(){this.form.toNextPage()}});const fi=[];ce(class extends Qe{static get observedAttributes(){return fi}static get NODENAME(){return x}constructor(){super()}execute(){this.form.toNextPage()}});const gi="success",vi="fail",mi=class{static STATE_SUCCESS=gi;static STATE_FAIL=vi;#V;constructor(t,e,i,a,s,n){this.action=t,this.state=e,this.message=i,this.data=a,this.context=s,this.#V=n}get resultOption(){return this.#V}},yi=class extends Ut{static STATES={FAIL:vi,SUCCESS:gi};constructor(){super()}#u=!1;#b;async init(){await super.init(),this.#u||(this.#u=!0,this.style.display="none",this.#b=this.parent(s),this.#b&&this.trigger(D))}get form(){return this.#b}async accept(t={}){const e=this.attr(ot);return!e||await Kt.resolve(e,t,!1)}async execute(t={},e={},i){return new mi(vi,"not implemented",null,t,e,i)}},bi=[];ce(class extends Qe{static get observedAttributes(){return bi}static get NODENAME(){return A}#u=!1;#n;#E;constructor(){super()}async init(){await super.init(),this.#u&&(this.#u=!0,this.#n=this.attr(ot))}get actions(){if(!this.#E){const t=[],e=this.children;for(let i of e)i instanceof yi&&t.push(i);this.#E=t}return this.#E}get condition(){return this.#n}execute(){this.form.submit({actions:this.actions})}});const wi={active:!1,disabled:!1};class xi{#N;#$=!1;#O=!1;constructor(t){this.#N=t,this.#N.forEach((t=>{t.active=this.#$,t.disabled=this.#O}))}get active(){return this.#$}set active(t){this.#$=t,this.#N.forEach((t=>t.active=this.#$))}get disabled(){return this.#O}set disabled(t){this.#O=t,this.#N.forEach((t=>t.disabled=this.#O))}}const Ai=[];ce(class extends Ut{static get observedAttributes(){return Ai}static get NODENAME(){return y}#b;#z;#D;#M;#C;#u=!1;constructor(){super()}async init(){await super.init(),this.#u||(this.#u=!0,this.#b=this.parent(s),this.#z=this.find(b).first()||wi,this.#D=this.find(w).first()||wi,this.#M=this.find(x).first()||wi,this.#C=new xi(this.find(A)||[wi]),this.#b.on([z,k,j],(()=>{this.update()})))}async update(){const t=this.#b,e=t.state,i=this.#z,a=this.#D,s=this.#M,n=this.#C;if(i.active=!0,i.disabled=!0,a.active=!1,a.disabled=!0,s.active=!1,s.disabled=!0,n.active=!1,n.disabled=!0,e==V)return;const{activePageIndex:r,activePage:o,nextPage:l,pages:u,useSummaryPage:c}=t,h=null!=await l;e==$?(i.disabled=!0,n.active=!0):e==N?(i.disabled=!1,n.active=!0,n.disabled=!t.valid):e==E&&(i.disabled=r<=0,h||!o.valid&&r+1<u.length?(a.active=!0,a.disabled=!o||!o.valid):c&&e==E?(s.active=!0,s.disabled=!o||!o.valid):(n.active=!0,n.disabled=!t.valid))}});const Pi=[Q,lt,dt];ce(class extends Ut{static get observedAttributes(){return Pi}static get NODENAME(){return g}constructor(){super()}get name(){return this.attr(Q)}get active(){return this.hasAttribute(lt)}set active(t){this.active!=t&&Ee(this,t)}get readonly(){return this.hasAttribute(dt)}set readonly(t){t?this.attr(dt,""):this.attr(dt,null)}});const Vi=[xt];ce(class extends Ut{static get observedAttributes(){return Vi}static get NODENAME(){return f}#b;#S;#u=!1;constructor(){super(),this.on("click",(({target:t})=>{if(!this.#b)return;if(t==this)return;const e=t.is(g)?t:t.parent(g),i=this.#b;if(!e)return;const{state:a,pages:s,activePage:n}=i,r=e.name;if(a==E||a==N){const t=((t,e,i)=>{for(let a of t){if(a.step==e&&a.condition)return a;if(a==i)return}return null})(s,r,n);t&&(i.activePage=t)}}))}async init(){if(await super.init(),this.progress=0,!this.#u){const t=this.#b=this.parent(s);this.#S=this.find(g),this.#b.on([j,k],(()=>{const e=t.state;if(V==e)return;const{activePageIndex:i,activePage:a,pages:s}=t;if(!a)return;const n=s.length,r=a?a.step:P,o=Math.floor(100*i/n);for(let t of this.steps){const i=t.name;e==E?(t.active=i==r,t.readonly=!1):e==N?(t.active=i==N,t.readonly=!1):(t.active=i==$,t.readonly=!0)}this.progress=e==N||e==$?100:o,this.trigger(R)})),this.#u=!0}}get steps(){return Array.from(this.#S)}get progress(){return this.attr(xt)}set progress(t){this.style.setProperty&&this.style.setProperty("--progress",t+"%"),this.attr(xt,Math.max(0,Math.min(t,100)))}});const Ei=`${n}-default`;class Ni extends yi{static get NODENAME(){return Ei}constructor(t,e){super(),this.endpoint=t,this.method=e}async execute(t={},e={}){let i=this.endpoint;i=await Kt.resolveText(i,t,i);const a=new URL(i,location),s=await fetch(a,{method:this.method,credentials:"include",mode:"cors",headers:{"content-type":"application/json"},body:JSON.stringify(t)});return new mi(this,s.ok?gi:vi,s,t,e)}}ce(Ni);const $i=Ni;i(353),i(16),["\\","?","[","]","{","}","(",")",".","^","$"].map((t=>({f:new RegExp("\\"+t,"g"),v:"\\"+t})));const Oi=[Q,st,Y,tt,et,it,nt],zi=(t,e)=>{for(let i of t.pages)i.readonly=e,i.active=e};class Di extends Ut{static get observedAttributes(){return Oi}static get NODENAME(){return s}#u=!1;#T=P;#j;#v=new Map;#a={};#k=null;#E=null;constructor(){super();const t=this.root;t.on(q,(t=>{t.preventDefault(),t.stopPropagation()})),t.on(B,(t=>{const e=t.target;this.#j=null,this.childValueChanged(e,null),t.preventDefault(),t.stopPropagation()})),this.ready.then((()=>this.trigger(z)))}async init(){await super.init(),this.#u||(this.#u=!0,this.activePageIndex=-1,this.state=P,this.useSummaryPage=this.hasAttribute(st),this.activePageIndex=-1,this.pages.length>0&&this.toNextPage())}get pages(){return this.#j||(this.#j=Array.from(this.root.find(r))),this.#j}get state(){return this.#T}set state(t){const e=this.#T;t!=V&&(e==E&&t!=E?zi(this,!0):e!=E&&t==E&&(zi(this,!1),this.activePage&&(this.activePage.active=!0))),this.#T=t,e!=t&&this.trigger(k),this.attr(it,t)}get valid(){for(let t of this.pages)if(t.condition&&!t.valid)return!1;return!0}async value(t){return await this.ready,this.#k&&await this.#k,0==arguments.length?this.#a:this.state!=E?await new Promise((e=>{const i=a=>{a.stopPropagation(),this.removeOn(i,k),e(this.value(t))};this.on(k,i)})):(await Promise.all(this.pages.map((e=>{const i=e.name;return i?e.value(ne(t,i)):e.value(t)}))),void await this.#I())}get activePage(){return 0<=this.activePageIndex&&this.activePageIndex<this.pages.length?this.pages[this.activePageIndex]:null}set activePage(t){const e=this.activePage;t==e&&this.state==E||(e&&(e.active=!1),this.activePageIndex=this.pages.indexOf(t),t.active=!0,this.state!=E&&(this.state=E),e&&this.scrollIntoView(),this.trigger(j))}get prevPage(){return(async()=>{const t=this.pages;for(let e=this.activePageIndex-1;e>=0;e--){const i=t[e];if(await this.#I(i),i.condition)return i}return null})()}get nextPage(){return(async()=>{const t=this.pages,e=this.activePageIndex+1;if(t)for(let i=e;i<t.length;i++){const e=t[i];if(await e.validate(this.#a),e.condition)return e}return null})()}async toPrevPage(){if(this.state!=E)this.state=E;else{const t=await this.prevPage;t&&(this.activePage=t)}}async toNextPage(){const t=await this.nextPage;t?(this.activePage=t,this.state=E):this.useSummaryPage?this.summary():this.submit()}async summary(){this.state=N}get submitActions(){if(!this.#E){const t=[],e=this.attr(tt);if(e){const t=this.attr(et)||"post";this.append(new $i(e,t))}const i=this.children;for(let e of i)e instanceof yi&&t.push(e);this.#E=t}return this.#E}async submit({data:t=null,actions:e=[],context:i={}}={}){this.state,this.state="submitting";let a=await this.value();if(!await fe(a,this.pages))return;t&&(a=Ct.merge(a,t));const s={state:this.hasAttribute(nt)?E:$};if(e=e.concat(this.submitActions)){const t=await(async(t,e,i,a)=>{const s=[];for(let n of t)if(await n.accept(e))try{const t=await n.execute(e,i,a)||new mi(n,gi,null,e,i,a);if(s.push(t),t.state==vi)return s;void 0!==t.data&&null!=t.data&&(e=t.data),void 0!==t.context&&t.data!=i&&(e=t.data)}catch(t){return s.push(new mi(n,vi,t,e,i,a)),s}return s})(e,a,i,s);this.trigger(C,t)}this.state=s.state,this.trigger(M,a);const n=(this.attr(Y)||"").trim();n.length>0&&this.trigger(n,a)}async validate(){await this.#I()}async#I(t){const e=Tt(),i=async()=>{const i=this.#a,a=t?await t.validate(i):await fe(i,this.pages);e.resolve(a),this.#k==e&&(this.state=E,this.#k=null)};return null==this.#k?(setTimeout(i,1),this.state=V):this.#k.then(i),this.#k=e,e}async childValueChanged(t,e){await this.ready,e=await e;const i=this.#v;t&&(te(e)?i.delete(t):i.set(t,e)),this.#a=await ae(this.#v,this.pages);const a=this.activePage;a?await this.#I(a):await this.#I()}}ce(Di);const Mi=Di})()})();
//# sourceMappingURL=module-defaultjs-html-form.min.js.map